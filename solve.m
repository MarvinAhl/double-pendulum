%% Double Pendulum on a Cart Equilibrium Transition Solver
% Author: Marvin Ahlborn
% Date: 2025-02-25
%
% This code solves the two-point boundary value problem (TPBVP) that is the
% necessary optimality conditions for the double pendulum on a cart. They
% have been derived in dynamics.mlx using implicit optimal control theory
% (calculus of variations). flow is the function that propagates the
% augmented state y (state and costate) and computes the state transition
% matrix (analytical derivates) using the variational approach for
% propagating it alongside y. 156 ODEs have to be integrated in total (12
% for y and 144 for the STM).
%
% Generally an implicit optimal control problem is solved by finding the
% initial costate lambda(t0) that results in satisfying the boundary
% condition x(tf) = xf. This is usually done by using simple
% single-shooting. This is hard however because of the small lambda0
% convergence radius and no way of guessing lambda0 using intuition as it
% lacks physical meaning.
% 
% This is why multiple shooting was used here. It improves the convergence
% slightly. The initial guess was supplied by a logarithmic random search
% procedure that tries out lambda0 over multiple orders of magnitude until
% it finds one that is close to the optimal solution by chance. Only then
% multiple shooting is employed. This was done to minimize the time wasted
% on obviously unpromising initial guesses. The initial guess lambda0 is
% propagated and the states at the multiple shooting segment times are
% taken as initial guess for its decision vector z.
%
% Parallelization was used for looking for initial guesses. Four processes
% employed random search and then multiple shooting independently and wrote
% the results in a separate file each.
%
% Lessons learned:
% Multiple shooting can't do miracles: It's better than single shooting but
% finding a solution is still dependent on a good initial guess.
%
% More multiple shooting segments don't mean better convergence: The sweet
% spot was found to be 4 segments. Less means slower convergence because of
% higher non-linearities in each segment but a lot more segments also led
% to slower convergence, not only because each step took longer, but also
% the number of steps increased somehow. This is all very heuristic, more
% research has to be done.
%
% Supply analytical gradients! This allows using less strict integration
% tolerances which makes everything faster.
%
% Don't waste time on unpromising initial guesses: Sometimes it's better to
% wait a few minutes for a finding a good initial guess by chance than to
% waste minutes by trying to optimize obviously bad initial guesses.
%
% Scaling is important: x and lambda can have wildely different orders of
% magnitude so they have to be scaled accordingly for multiple shooting to
% converge. Finding the order of magnitude of lambda (which can vary quite
% a bit) is not easy. One advice is to visualize the problem (animation in
% this case) and manually tweak each lambda component individually until a
% good control effort is found. The system has to visibly do something but
% shouldn't explode immediately as soon as you press run. Use this value
% for normalization.
%
% Don't make the problem impossible: Sometimes the boundary conditions are
% chosen such that the problem is impossible to solve. E.g. setting the
% final time too low in the pendulum case. The system is inheritely
% constrained by the speed of its physics, you can't expect miracles from
% the solver. Especially if the solver regularly ends with "Last step of
% ineffective" and it doesn't find solutions it might be a sign that you
% might need to change your problem (In the pendulum case just giving it
% more time for the transfers).

clear variables

% Surpresses integration warnings (not the best practice but it go annoying)
warning('off', 'MATLAB:ode113:IntegrationTolNotMet');

% Constants
L1 = 1;
L2 = 1;
M1 = 1;
M2 = 1;
m = 10;
g = 9.81;

% Initial and final conditions, choosing a realistic tf is important,
% otherwise the solver might not find a solution
t0 = 0;
tf = 3;
x0 = [0; 0; 0; 0; 0; 0];
xf = [0; pi; 0; 0; 0; 0];

% A list of lambda0 solutions are listed in the following as a reference
% Solutions ---------------------------------------
% Equilibrium positions are
% 1: Down      [0; 0; 0; 0; 0; 0]
% 2: Half down [0; 0; pi; 0; 0; 0]
% 3: Half up   [0; pi; 0; 0; 0; 0]
% 4: Up        [0; pi; pi; 0; 0; 0]

% 1 -> 4 -------------------------------------------
% tf = 3, L1 = 1, L2 = 1, M1 = 1, M2 = 1, m = 10
%lambda0 = [1.587352613745261e+03;1.657860122722986e+04;1.108821257906309e+03;-1.411737598445466e+02;3.682901620305176e+03;3.817013238648786e+03];
% tf = 2.5
%lambda0 = [-1.506247262272040e+03;5.250159589052064e+04;2.313654655484444e+04;-9.194434892091906e+03;-1.474619967711617e+03;3.904352200330692e+03];
% tf = 2.3
%lambda0 = [-8.669190311129807e+03;7.970964840220944e+04;4.584398816251153e+04;-2.168016955248384e+04;-1.123790227499749e+04;-5.258755305207562e+02];
% tf = 2.1
%lambda0 = [-2.741221248967456e+04;1.286326191273573e+05;7.161276324083080e+04;-4.797138258876016e+04;-3.376258532307036e+04;-1.020799942754750e+04];

% 1 -> 2 --------------------------------------------
% tf = 2, L1 = 1, L2 = 1, M1 = 1, M2 = 1, m = 10
%lambda0 = [-1.782662208345813e+04;1.542477951819267e+04;3.796584488294136e+04;-3.816167051206487e+04;-3.245614283605180e+04;-3.268981801254881e+04];
% tf = 2.5
%lambda0 = [8.673769339363645e+03;-6.679291711170526e+03;-1.151334784114820e+04;9.536295969028484e+03;9.533083560939440e+03;4.152213925530238e+03];
%lambda0 = [16570.128022; -21933.100565; -17637.557039;  19670.944820; 15470.462518;   9683.947040]

% 1 -> 3 --------------------------------------------
% tf = 3, L1 = 1, L2 = 1, M1 = 1, M2 = 1, m = 10
%lambda0 = [1.069500874604264e+04;-3.663027713651169e+04;-1.398278876915920e+04;1.456652987459533e+04;7.847188265688156e+03;2.871839225480095e+03];
% Doesn't fully converge
%lambda0 = [5.321858729664135e+02;3.570807953679245e+04;4.526832848115059e+03;-4.857968377212074e+03;9.782274524984350e+02;2.308627922220526e+03];

% 2 -> 3
% tf = 2.5, L1 = 1, L2 = 1, M1 = 1, M2 = 1, m = 10
%lambda0 = [2.997144379843100e+03;  6.001940868577377e+03; -2.272180900183317e+04;  3.206522247485020e+03;  2.290281953130234e+03; -6.071406236954097e+03];

% 3 -> 2
% tf = 3, L1 = 1, L2 = 1, M1 = 1, M2 = 1, m = 10
%lambda0 = [-1.626063751768224e+03;  2.669616328097065e+04; -2.902571015030689e+03; -3.522673086568268e+03;  5.472412520180777e+03;  1.972941430131935e+03];

% 2 -> 4
% tf = 5, L1 = 1, L2 = 1, M1 = 1, M2 = 1, m = 10
%lambda0 = [5.053852505432984e+01; -1.186961810886124e+04;  1.628296874282102e+04; -5.475540491867783e+02; -2.151029653013957e+03;  4.087304109263098e+03];


% -------------------- Solve BVP by multiple shooting ---------------------

% Common values for x and lambda used for scaling the shooting problem
xmax = [5; 2*pi; 2*pi; 5; 2*pi; 2*pi];
lambdamax = 1000 * [1; 1; 1; 1; 1; 1];

% The time grid for multiple shooting
multshoottime = linspace(t0, tf, 5);

% The actual solution procedure
parfor thread = 1:4  % Just do everything four times (easiest parallelization ever)
    warning('off', 'MATLAB:ode113:IntegrationTolNotMet');  % Has to be done for each thread

    % Solver loop (Searches for solutions until the code is stopped manually)
    while true
        % Initial guess loop, randomly searches for initial guesses until a
        % promising one is found
        while true
            % This is the logarithmic initial guess procedure. The goal is
            % to find guess in all orders of magnitude from 10 to 10000
            % equally spaced on a log scale (because the optimal order of
            % magnitude is not known and the region between 10 and 100
            % should be as likely as the region between 1000 and 10000).
            % 10.^(3 * rand([6 1]) + 1) does exactly that.
            % (randi([0 1], 6, 1) * 2 - 1) just flips the sign randomly to
            % allow for negative guesses.
            lambda0guess = 10.^(3 * rand([6 1]) + 1) .* (randi([0 1], 6, 1) * 2 - 1);

            try
                [x, ~, ~] = flowy(x0, lambda0guess, [t0 tf], L1, L2, M1, M2, m, g);
            catch
                continue  % Just skip to the next guess in case there was an error
            end

            % Only procede to optimization if the initial guess is promising
            if norm(x - xf) < 10
                break  % Go to optimization
            end
        end

        % Do the actual multiple shooting
        disp("Thread " + thread + ": Starting Optimization.")
        [lambda0sol, converged] = multshoot(x0, xf, lambda0guess, xmax, lambdamax, multshoottime, L1, L2, M1, M2, m, g);

        if converged
            disp("Thread " + thread + ": Converged with lambda0 = ");
            disp(lambda0sol');
            % Write the solutions to corresponding text files
            writelines(num2str(lambda0sol', "%1.15d; "), "solutions"+thread+".txt", WriteMode = "append");
        else
            disp("Thread " + thread + ": Finished. No convergence.");
        end
    end

end
% Parallelization ends

% The following code is never executed unless the parfor loop is commented
% out (only for visualization of solutions)

lambda0 = [1.069500874604264e+04;-3.663027713651169e+04;-1.398278876915920e+04;1.456652987459533e+04;7.847188265688156e+03;2.871839225480095e+03];

% Recompute best solution with lambda0 and animate it
fps = 20;
frames = round((tf - t0) * fps);
dt = (tf - t0) / frames;
tspan = linspace(t0, tf, frames);
[~, ~, xhistory] = flowy(x0, lambda0, tspan, L1, L2, M1, M2, m, g);

animate(xhistory, frames, dt, L1, L2, M1, M2, m, g);

% ----------------------- Functions -----------------------------

% Dynamics of the augmented state y = [x; lambda] (state and costate)
function ydot = F(y, L1, L2, M1, M2, m, g)
    x1 = y(1);
    x2 = y(2);
    x3 = y(3);
    x4 = y(4);
    x5 = y(5);
    x6 = y(6);
    lambda1 = y(7);
    lambda2 = y(8);
    lambda3 = y(9);
    lambda4 = y(10);
    lambda5 = y(11);
    lambda6 = y(12);

    % From dynamics.mlx
    ydot = [x4;x5;x6;(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0))./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0));((M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*-2.0)./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)));(((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*2.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)));0.0;-(lambda4.*(M1.^2.*g.*cos(x2.*2.0).*2.0+L1.*M1.^2.*x5.^2.*cos(x2).*2.0+M1.*M2.*g.*cos(x2.*2.0).*2.0+L2.*M1.*M2.*x6.^2.*cos(x2.*2.0-x3).*2.0+L1.*M1.*M2.*x5.^2.*cos(x2).*2.0+(M2.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))))./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))+lambda4.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0))-(lambda6.*(M1.*g.*m.*cos(x2.*2.0-x3)+M2.*g.*m.*cos(x2.*2.0-x3)+L1.*M1.*m.*x5.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0)-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*2.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(lambda5.*(M1.^2.*g.*cos(x2).*2.0+M1.*M2.*g.*cos(x2).*2.0+M1.*g.*m.*cos(x2).*2.0+M2.*g.*m.*cos(x2)+L1.*M1.^2.*x5.^2.*cos(x2.*2.0).*2.0+M2.*g.*m.*cos(x2-x3.*2.0)+L2.*M1.*M2.*x6.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2-x3).*2.0+L1.*M1.*M2.*x5.^2.*cos(x2.*2.0).*2.0+L1.*M2.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0).*2.0+L2.*M1.*M2.*x6.^2.*cos(x2+x3)-(M1.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)))./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(lambda5.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*4.0)./L1+(lambda6.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*4.0)./L2;(lambda6.*(M1.*g.*m.*cos(x3)+M2.*g.*m.*cos(x3)+M1.*g.*m.*cos(x2.*2.0-x3)+M2.*g.*m.*cos(x2.*2.0-x3)+L1.*M1.*m.*x5.^2.*cos(x2-x3).*2.0+L1.*M2.*m.*x5.^2.*cos(x2-x3).*2.0+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0).*2.0-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M1.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)))./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*lambda4.*(L2.*M1.*x6.^2.*cos(x2.*2.0-x3)-L2.*M1.*x6.^2.*cos(x3)+(sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))))./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))-(M2.*lambda5.*(g.*m.*cos(x2-x3.*2.0).*2.0+L2.*m.*x6.^2.*cos(x2-x3).*2.0+L1.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0).*2.0-L2.*M1.*x6.^2.*cos(x2+x3)+L2.*M1.*x6.^2.*cos(x2-x3)+(sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))))./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-M2.*lambda4.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*2.0-(M2.*lambda6.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*4.0)./L2+(M2.*lambda5.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*4.0)./L1;-lambda1;-(L2.*M1.^2.*lambda2+L2.*M1.*M2.*lambda2+L2.*M1.*lambda2.*m.*2.0+L2.*M2.*lambda2.*m-L2.*M1.^2.*lambda2.*cos(x2.*2.0)-L2.*M2.*lambda2.*m.*cos(x2.*2.0-x3.*2.0)-L2.*M1.^2.*lambda5.*x5.*sin(x2.*2.0).*2.0-L2.*M1.*M2.*lambda2.*cos(x2.*2.0)+L1.*M1.*lambda6.*m.*x5.*sin(x2-x3).*4.0+L1.*M2.*lambda6.*m.*x5.*sin(x2-x3).*4.0+L1.*L2.*M1.^2.*lambda4.*x5.*sin(x2).*4.0-L2.*M1.*M2.*lambda5.*x5.*sin(x2.*2.0).*2.0-L2.*M2.*lambda5.*m.*x5.*sin(x2.*2.0-x3.*2.0).*2.0+L1.*L2.*M1.*M2.*lambda4.*x5.*sin(x2).*4.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)));-(L1.*M1.^2.*lambda3+L1.*M1.*M2.*lambda3+L1.*M1.*lambda3.*m.*2.0+L1.*M2.*lambda3.*m-L1.*M1.^2.*lambda3.*cos(x2.*2.0)-L1.*M2.*lambda3.*m.*cos(x2.*2.0-x3.*2.0)-L1.*M1.*M2.*lambda3.*cos(x2.*2.0)-L2.*M1.*M2.*lambda5.*x6.*sin(x2-x3).*2.0-L2.*M2.*lambda5.*m.*x6.*sin(x2-x3).*4.0+L1.*M2.*lambda6.*m.*x6.*sin(x2.*2.0-x3.*2.0).*2.0-L2.*M1.*M2.*lambda5.*x6.*sin(x2+x3).*2.0+L1.*L2.*M1.*M2.*lambda4.*x6.*sin(x3).*2.0+L1.*L2.*M1.*M2.*lambda4.*x6.*sin(x2.*2.0-x3).*2.0)./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))];
end

% Computes the derivative of the dynamics (of x and lambda)
function A = dFdy(y, L1, L2, M1, M2, m, g)
    x1 = y(1);
    x2 = y(2);
    x3 = y(3);
    x4 = y(4);
    x5 = y(5);
    x6 = y(6);
    lambda1 = y(7);
    lambda2 = y(8);
    lambda3 = y(9);
    lambda4 = y(10);
    lambda5 = y(11);
    lambda6 = y(12);

    % From dynamics.mlx
    A = reshape([0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,(M1.^2.*g.*cos(x2.*2.0).*2.0+L1.*M1.^2.*x5.^2.*cos(x2).*2.0+M1.*M2.*g.*cos(x2.*2.0).*2.0-(M1.*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+L2.*M1.*M2.*x6.^2.*cos(x2.*2.0-x3).*2.0+L1.*M1.*M2.*x5.^2.*cos(x2).*2.0+(M2.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M1.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M2.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0))./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))-(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)),((M1.^2.*g.*cos(x2)+M1.*M2.*g.*cos(x2)+M1.*g.*m.*cos(x2)+(M2.*g.*m.*cos(x2))./2.0+L1.*M1.^2.*x5.^2.*cos(x2.*2.0)+(M2.*g.*m.*cos(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*cos(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*cos(x2-x3)+L1.*M1.*M2.*x5.^2.*cos(x2.*2.0)+L1.*M2.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0)+(L2.*M1.*M2.*x6.^2.*cos(x2+x3))./2.0-(M1.*cos(x2).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x2).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M2.*cos(x2).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)+(M2.*cos(x2-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)).*-2.0)./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+((M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*2.0)./L1,((M1.*g.*m.*cos(x2.*2.0-x3)+M2.*g.*m.*cos(x2.*2.0-x3)+L1.*M1.*m.*x5.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0)+(M1.*cos(x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M1.*cos(x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)+(M2.*cos(x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)-(M1.*cos(x2.*2.0-x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)-(M2.*cos(x2.*2.0-x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)).*2.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-((M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*2.0)./L2,0.0,(lambda4.*(M1.^2.*g.*sin(x2.*2.0).*4.0+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0).*4.0+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3).*4.0-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*sin(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)))./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))+(lambda6.*(M1.*g.*m.*sin(x2.*2.0-x3).*2.0+M2.*g.*m.*sin(x2.*2.0-x3).*2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0).*2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M1.*sin(x2.*2.0-x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M2.*sin(x2.*2.0-x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)).*2.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-lambda4.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).^2.*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*8.0+lambda4.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*(M1.^2.*g.*cos(x2.*2.0).*2.0+L1.*M1.^2.*x5.^2.*cos(x2).*2.0+M1.*M2.*g.*cos(x2.*2.0).*2.0+L2.*M1.*M2.*x6.^2.*cos(x2.*2.0-x3).*2.0+L1.*M1.*M2.*x5.^2.*cos(x2).*2.0+(M2.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2+lambda4.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*cos(x2.*2.0).*2.0+L1.*M1.^2.*x5.^2.*cos(x2).*2.0+M1.*M2.*g.*cos(x2.*2.0).*2.0-(M1.*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+L2.*M1.*M2.*x6.^2.*cos(x2.*2.0-x3).*2.0+L1.*M1.*M2.*x5.^2.*cos(x2).*2.0+(M2.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M1.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M2.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0))-(lambda5.*(M1.^2.*g.*sin(x2).*2.0+M1.*M2.*g.*sin(x2).*2.0+M1.*g.*m.*sin(x2).*2.0+M2.*g.*m.*sin(x2)+L1.*M1.^2.*x5.^2.*sin(x2.*2.0).*4.0+M2.*g.*m.*sin(x2-x3.*2.0)+L2.*M1.*M2.*x6.^2.*sin(x2-x3)+L2.*M2.*m.*x6.^2.*sin(x2-x3).*2.0+L1.*M1.*M2.*x5.^2.*sin(x2.*2.0).*4.0+L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0).*4.0+L2.*M1.*M2.*x6.^2.*sin(x2+x3)-(M1.*sin(x2).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*sin(x2).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M1.*sin(x2).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M2.*sin(x2).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M2.*sin(x2-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)))./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+lambda4.*(M1.^2.*cos(x2.*2.0).*4.0+M1.*M2.*cos(x2.*2.0).*4.0+M2.*m.*cos(x2.*2.0-x3.*2.0).*4.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0))-(lambda5.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*cos(x2)+M1.*M2.*g.*cos(x2)+M1.*g.*m.*cos(x2)+(M2.*g.*m.*cos(x2))./2.0+L1.*M1.^2.*x5.^2.*cos(x2.*2.0)+(M2.*g.*m.*cos(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*cos(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*cos(x2-x3)+L1.*M1.*M2.*x5.^2.*cos(x2.*2.0)+L1.*M2.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0)+(L2.*M1.*M2.*x6.^2.*cos(x2+x3))./2.0-(M1.*cos(x2).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x2).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M2.*cos(x2).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)+(M2.*cos(x2-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)).*4.0)./L1+(lambda6.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.*g.*m.*cos(x2.*2.0-x3)+M2.*g.*m.*cos(x2.*2.0-x3)+L1.*M1.*m.*x5.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0)+(M1.*cos(x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M1.*cos(x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)+(M2.*cos(x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)-(M1.*cos(x2.*2.0-x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)-(M2.*cos(x2.*2.0-x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)).*4.0)./L2+(lambda6.*(M1.^2.*cos(x2.*2.0).*2.0+M1.*M2.*cos(x2.*2.0).*2.0+M2.*m.*cos(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*4.0)./L2+(lambda6.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.*g.*m.*cos(x2.*2.0-x3)+M2.*g.*m.*cos(x2.*2.0-x3)+L1.*M1.*m.*x5.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0)-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*2.0)./L2-(lambda5.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*cos(x2).*2.0+M1.*M2.*g.*cos(x2).*2.0+M1.*g.*m.*cos(x2).*2.0+M2.*g.*m.*cos(x2)+L1.*M1.^2.*x5.^2.*cos(x2.*2.0).*2.0+M2.*g.*m.*cos(x2-x3.*2.0)+L2.*M1.*M2.*x6.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2-x3).*2.0+L1.*M1.*M2.*x5.^2.*cos(x2.*2.0).*2.0+L1.*M2.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0).*2.0+L2.*M1.*M2.*x6.^2.*cos(x2+x3)-(M1.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)))./L1-(lambda5.*(M1.^2.*cos(x2.*2.0).*2.0+M1.*M2.*cos(x2.*2.0).*2.0+M2.*m.*cos(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*4.0)./L1-(lambda6.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*8.0)./L2+(lambda5.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*8.0)./L1,-(M2.*lambda4.*(L2.*M1.*x6.^2.*sin(x2.*2.0-x3).*2.0+(sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(sin(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)))./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))+(lambda6.*(M1.*g.*m.*sin(x2.*2.0-x3).*-2.0-M2.*g.*m.*sin(x2.*2.0-x3).*2.0-L1.*M1.*m.*x5.^2.*sin(x2-x3).*2.0-L1.*M2.*m.*x5.^2.*sin(x2-x3).*2.0-L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0).*4.0+(M1.*sin(x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*sin(x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M1.*sin(x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M2.*sin(x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M1.*sin(x2.*2.0-x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M2.*sin(x2.*2.0-x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)))./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(lambda6.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.*g.*m.*cos(x3)+M2.*g.*m.*cos(x3)+M1.*g.*m.*cos(x2.*2.0-x3)+M2.*g.*m.*cos(x2.*2.0-x3)+L1.*M1.*m.*x5.^2.*cos(x2-x3).*2.0+L1.*M2.*m.*x5.^2.*cos(x2-x3).*2.0+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0).*2.0-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M1.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)))./L2-M2.*lambda4.*(L2.*M1.*x6.^2.*cos(x2.*2.0-x3)-L2.*M1.*x6.^2.*cos(x3)+(sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2+(M2.*lambda5.*(g.*m.*sin(x2-x3.*2.0).*2.0+L2.*m.*x6.^2.*sin(x2-x3).*2.0+L1.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0).*4.0-L2.*M1.*x6.^2.*sin(x2+x3)+L2.*M1.*x6.^2.*sin(x2-x3)-(cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(sin(x2-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)))./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-M2.*lambda4.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*cos(x2.*2.0).*2.0+L1.*M1.^2.*x5.^2.*cos(x2).*2.0+M1.*M2.*g.*cos(x2.*2.0).*2.0-(M1.*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+L2.*M1.*M2.*x6.^2.*cos(x2.*2.0-x3).*2.0+L1.*M1.*M2.*x5.^2.*cos(x2).*2.0+(M2.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M1.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M2.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)).*2.0-M2.*lambda4.*m.*cos(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*4.0+(M2.*lambda5.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*(g.*m.*cos(x2-x3.*2.0).*2.0+L2.*m.*x6.^2.*cos(x2-x3).*2.0+L1.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0).*2.0-L2.*M1.*x6.^2.*cos(x2+x3)+L2.*M1.*x6.^2.*cos(x2-x3)+(sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2)./L1+(M2.*lambda5.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*cos(x2)+M1.*M2.*g.*cos(x2)+M1.*g.*m.*cos(x2)+(M2.*g.*m.*cos(x2))./2.0+L1.*M1.^2.*x5.^2.*cos(x2.*2.0)+(M2.*g.*m.*cos(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*cos(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*cos(x2-x3)+L1.*M1.*M2.*x5.^2.*cos(x2.*2.0)+L1.*M2.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0)+(L2.*M1.*M2.*x6.^2.*cos(x2+x3))./2.0-(M1.*cos(x2).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x2).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M2.*cos(x2).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)+(M2.*cos(x2-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)).*4.0)./L1-(M2.*lambda6.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.*g.*m.*cos(x2.*2.0-x3)+M2.*g.*m.*cos(x2.*2.0-x3)+L1.*M1.*m.*x5.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0)+(M1.*cos(x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*sin(x2).*2.0+L2.*M2.*lambda5.*sin(x2)-L2.*M2.*lambda5.*sin(x2-x3.*2.0)-L1.*M1.*lambda6.*sin(x2.*2.0-x3).*2.0-L1.*M2.*lambda6.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M1.*cos(x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)+(M2.*cos(x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)-(M1.*cos(x2.*2.0-x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)-(M2.*cos(x2.*2.0-x3).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*4.0)).*4.0)./L2-(M2.*lambda6.*m.*cos(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*8.0)./L2+M2.*lambda4.*m.*sin(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*4.0+(M2.*lambda5.*m.*cos(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*8.0)./L1-(M2.*lambda5.*m.*sin(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*8.0)./L1+(M2.*lambda6.*m.*sin(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*8.0)./L2,0.0,-(L2.*M1.^2.*lambda2.*sin(x2.*2.0).*2.0+L2.*M2.*lambda2.*m.*sin(x2.*2.0-x3.*2.0).*2.0-L2.*M1.^2.*lambda5.*x5.*cos(x2.*2.0).*4.0+L2.*M1.*M2.*lambda2.*sin(x2.*2.0).*2.0+L1.*M1.*lambda6.*m.*x5.*cos(x2-x3).*4.0+L1.*M2.*lambda6.*m.*x5.*cos(x2-x3).*4.0+L1.*L2.*M1.^2.*lambda4.*x5.*cos(x2).*4.0-L2.*M1.*M2.*lambda5.*x5.*cos(x2.*2.0).*4.0-L2.*M2.*lambda5.*m.*x5.*cos(x2.*2.0-x3.*2.0).*4.0+L1.*L2.*M1.*M2.*lambda4.*x5.*cos(x2).*4.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+((M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.^2.*lambda2+L2.*M1.*M2.*lambda2+L2.*M1.*lambda2.*m.*2.0+L2.*M2.*lambda2.*m-L2.*M1.^2.*lambda2.*cos(x2.*2.0)-L2.*M2.*lambda2.*m.*cos(x2.*2.0-x3.*2.0)-L2.*M1.^2.*lambda5.*x5.*sin(x2.*2.0).*2.0-L2.*M1.*M2.*lambda2.*cos(x2.*2.0)+L1.*M1.*lambda6.*m.*x5.*sin(x2-x3).*4.0+L1.*M2.*lambda6.*m.*x5.*sin(x2-x3).*4.0+L1.*L2.*M1.^2.*lambda4.*x5.*sin(x2).*4.0-L2.*M1.*M2.*lambda5.*x5.*sin(x2.*2.0).*2.0-L2.*M2.*lambda5.*m.*x5.*sin(x2.*2.0-x3.*2.0).*2.0+L1.*L2.*M1.*M2.*lambda4.*x5.*sin(x2).*4.0))./L2,-(L1.*M1.^2.*lambda3.*sin(x2.*2.0).*2.0+L1.*M2.*lambda3.*m.*sin(x2.*2.0-x3.*2.0).*2.0+L1.*M1.*M2.*lambda3.*sin(x2.*2.0).*2.0-L2.*M1.*M2.*lambda5.*x6.*cos(x2-x3).*2.0-L2.*M2.*lambda5.*m.*x6.*cos(x2-x3).*4.0+L1.*M2.*lambda6.*m.*x6.*cos(x2.*2.0-x3.*2.0).*4.0-L2.*M1.*M2.*lambda5.*x6.*cos(x2+x3).*2.0+L1.*L2.*M1.*M2.*lambda4.*x6.*cos(x2.*2.0-x3).*4.0)./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+((M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L1.*M1.^2.*lambda3+L1.*M1.*M2.*lambda3+L1.*M1.*lambda3.*m.*2.0+L1.*M2.*lambda3.*m-L1.*M1.^2.*lambda3.*cos(x2.*2.0)-L1.*M2.*lambda3.*m.*cos(x2.*2.0-x3.*2.0)-L1.*M1.*M2.*lambda3.*cos(x2.*2.0)-L2.*M1.*M2.*lambda5.*x6.*sin(x2-x3).*2.0-L2.*M2.*lambda5.*m.*x6.*sin(x2-x3).*4.0+L1.*M2.*lambda6.*m.*x6.*sin(x2.*2.0-x3.*2.0).*2.0-L2.*M1.*M2.*lambda5.*x6.*sin(x2+x3).*2.0+L1.*L2.*M1.*M2.*lambda4.*x6.*sin(x3).*2.0+L1.*L2.*M1.*M2.*lambda4.*x6.*sin(x2.*2.0-x3).*2.0))./L1,0.0,0.0,0.0,-((M1.*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+L2.*M1.*M2.*x6.^2.*cos(x2.*2.0-x3)-L2.*M1.*M2.*x6.^2.*cos(x3)+(M2.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*cos(x2.*2.0-x3.*2.0).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)+(M2.^2.*m.*cos(x2.*2.0-x3.*2.0).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M1.*M2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2))./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))+M2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*2.0,((M2.*g.*m.*cos(x2-x3.*2.0)+(L2.*M1.*M2.*x6.^2.*cos(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0)-(L2.*M1.*M2.*x6.^2.*cos(x2+x3))./2.0+(M1.*cos(x2).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.^2.*m.*cos(x2-x3.*2.0).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M1.*M2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)).*2.0)./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*4.0)./L1,(((M1.*g.*m.*cos(x3))./2.0+(M2.*g.*m.*cos(x3))./2.0+(M1.*g.*m.*cos(x2.*2.0-x3))./2.0+(M2.*g.*m.*cos(x2.*2.0-x3))./2.0+L1.*M1.*m.*x5.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0)-(M1.*cos(x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M1.*cos(x2.*2.0-x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.^2.*m.*cos(x2.*2.0-x3).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x3).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M1.*M2.*m.*cos(x2.*2.0-x3).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M1.*M2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x3).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)).*-2.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*4.0)./L2,0.0,-(lambda4.*(L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3).*2.0-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*sin(x2.*2.0-x3.*2.0).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).^2.*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2)))./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))-lambda4.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+L2.*M1.*M2.*x6.^2.*cos(x2.*2.0-x3)-L2.*M1.*M2.*x6.^2.*cos(x3)+(M2.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*cos(x2.*2.0-x3.*2.0).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)+(M2.^2.*m.*cos(x2.*2.0-x3.*2.0).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M1.*M2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2))+(lambda5.*(M2.*g.*m.*sin(x2-x3.*2.0).*2.0+L2.*M1.*M2.*x6.^2.*sin(x2-x3)+L2.*M2.*m.*x6.^2.*sin(x2-x3).*2.0+L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0).*4.0-L2.*M1.*M2.*x6.^2.*sin(x2+x3)+(M1.*sin(x2).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*sin(x2).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2-x3.*2.0).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.^2.*m.*sin(x2-x3.*2.0).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).*sin(x2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M1.*M2.*m.*sin(x2.*2.0-x3.*2.0).*sin(x2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2)))./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(lambda6.*(M1.*g.*m.*sin(x2.*2.0-x3)+M2.*g.*m.*sin(x2.*2.0-x3)+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0).*2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M1.*sin(x2.*2.0-x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*sin(x2.*2.0-x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.^2.*m.*sin(x2.*2.0-x3).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M1.*M2.*m.*sin(x2.*2.0-x3).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)).*2.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(lambda6.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*g.*m.*cos(x3))./2.0+(M2.*g.*m.*cos(x3))./2.0+(M1.*g.*m.*cos(x2.*2.0-x3))./2.0+(M2.*g.*m.*cos(x2.*2.0-x3))./2.0+L1.*M1.*m.*x5.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0)-(M1.*cos(x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M1.*cos(x2.*2.0-x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.^2.*m.*cos(x2.*2.0-x3).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x3).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M1.*M2.*m.*cos(x2.*2.0-x3).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M1.*M2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x3).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)).*4.0)./L2+(lambda5.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M2.*g.*m.*cos(x2-x3.*2.0)+(L2.*M1.*M2.*x6.^2.*cos(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0)-(L2.*M1.*M2.*x6.^2.*cos(x2+x3))./2.0+(M1.*cos(x2).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.^2.*m.*cos(x2-x3.*2.0).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M1.*M2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)).*4.0)./L1-M2.*lambda4.*m.*sin(x2.*2.0-x3.*2.0).*(M1.^2.*g.*cos(x2.*2.0).*2.0+L1.*M1.^2.*x5.^2.*cos(x2).*2.0+M1.*M2.*g.*cos(x2.*2.0).*2.0+L2.*M1.*M2.*x6.^2.*cos(x2.*2.0-x3).*2.0+L1.*M1.*M2.*x5.^2.*cos(x2).*2.0+(M2.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*2.0-M2.*lambda4.*m.*cos(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*4.0-(M2.*lambda6.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.*g.*m.*cos(x2.*2.0-x3)+M2.*g.*m.*cos(x2.*2.0-x3)+L1.*M1.*m.*x5.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0)-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*4.0)./L2+(M2.*lambda5.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*cos(x2).*2.0+M1.*M2.*g.*cos(x2).*2.0+M1.*g.*m.*cos(x2).*2.0+M2.*g.*m.*cos(x2)+L1.*M1.^2.*x5.^2.*cos(x2.*2.0).*2.0+M2.*g.*m.*cos(x2-x3.*2.0)+L2.*M1.*M2.*x6.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2-x3).*2.0+L1.*M1.*M2.*x5.^2.*cos(x2.*2.0).*2.0+L1.*M2.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0).*2.0+L2.*M1.*M2.*x6.^2.*cos(x2+x3)-(M1.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*2.0)./L1-(M2.*lambda6.*m.*cos(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*8.0)./L2+M2.*lambda4.*m.*sin(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*4.0+(M2.*lambda5.*m.*cos(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*8.0)./L1-(M2.*lambda5.*m.*sin(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*1.6e+1)./L1+(M2.*lambda6.*m.*sin(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*1.6e+1)./L2,(lambda6.*(M1.*g.*m.*sin(x2.*2.0-x3)+M2.*g.*m.*sin(x2.*2.0-x3)-M1.*g.*m.*sin(x3)-M2.*g.*m.*sin(x3)+L1.*M1.*m.*x5.^2.*sin(x2-x3).*2.0+L1.*M2.*m.*x5.^2.*sin(x2-x3).*2.0+L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0).*4.0+(M1.*sin(x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*sin(x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M1.*sin(x2.*2.0-x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*sin(x2.*2.0-x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.^2.*m.*sin(x2.*2.0-x3).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).*sin(x3).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M1.*M2.*m.*sin(x2.*2.0-x3).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M1.*M2.*m.*sin(x2.*2.0-x3.*2.0).*sin(x3).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)))./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*lambda4.*(L2.*M1.*x6.^2.*sin(x2.*2.0-x3)+L2.*M1.*x6.^2.*sin(x3)-(sin(x2.*2.0-x3.*2.0).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*m.*sin(x2.*2.0-x3.*2.0).^2.*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2)))./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))-(M2.*lambda5.*(g.*m.*sin(x2-x3.*2.0).*4.0+L2.*m.*x6.^2.*sin(x2-x3).*2.0+L1.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0).*4.0+L2.*M1.*x6.^2.*sin(x2+x3)+L2.*M1.*x6.^2.*sin(x2-x3)-(cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(sin(x2-x3.*2.0).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*m.*sin(x2-x3.*2.0).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2)))./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+M2.^2.*lambda4.*m.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*x6.^2.*cos(x2.*2.0-x3)-L2.*M1.*x6.^2.*cos(x3)+(sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*2.0+M2.*lambda4.*m.*cos(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*4.0-M2.^2.*lambda4.*m.^2.*sin(x2.*2.0-x3.*2.0).^2.*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*8.0+M2.*lambda4.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+L2.*M1.*M2.*x6.^2.*cos(x2.*2.0-x3)-L2.*M1.*M2.*x6.^2.*cos(x3)+(M2.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*cos(x2.*2.0-x3.*2.0).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)+(M2.^2.*m.*cos(x2.*2.0-x3.*2.0).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)-(M1.*M2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)).*2.0)./(L1.*L2)).*2.0+(M2.*lambda6.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.*g.*m.*cos(x3)+M2.*g.*m.*cos(x3)+M1.*g.*m.*cos(x2.*2.0-x3)+M2.*g.*m.*cos(x2.*2.0-x3)+L1.*M1.*m.*x5.^2.*cos(x2-x3).*2.0+L1.*M2.*m.*x5.^2.*cos(x2-x3).*2.0+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0).*2.0-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M1.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*2.0)./L2+(M2.*lambda6.*m.*cos(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*8.0)./L2-(M2.^2.*lambda6.*m.^2.*sin(x2.*2.0-x3.*2.0).^2.*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*1.6e+1)./L2-(M2.^2.*lambda5.*m.*sin(x2.*2.0-x3.*2.0).*(g.*m.*cos(x2-x3.*2.0).*2.0+L2.*m.*x6.^2.*cos(x2-x3).*2.0+L1.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0).*2.0-L2.*M1.*x6.^2.*cos(x2+x3)+L2.*M1.*x6.^2.*cos(x2-x3)+(sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*2.0)./L1+(M2.*lambda6.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*g.*m.*cos(x3))./2.0+(M2.*g.*m.*cos(x3))./2.0+(M1.*g.*m.*cos(x2.*2.0-x3))./2.0+(M2.*g.*m.*cos(x2.*2.0-x3))./2.0+L1.*M1.*m.*x5.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0)-(M1.*cos(x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*sin(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M1.*cos(x2.*2.0-x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.^2.*m.*cos(x2.*2.0-x3).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x3).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M1.*M2.*m.*cos(x2.*2.0-x3).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)+(M1.*M2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x3).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)).*4.0)./L2-(M2.*lambda5.*m.*cos(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*8.0)./L1+(M2.^2.*lambda5.*m.^2.*sin(x2.*2.0-x3.*2.0).^2.*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*1.6e+1)./L1-(M2.*lambda5.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M2.*g.*m.*cos(x2-x3.*2.0)+(L2.*M1.*M2.*x6.^2.*cos(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0)-(L2.*M1.*M2.*x6.^2.*cos(x2+x3))./2.0+(M1.*cos(x2).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L1.*M1.*lambda6.*sin(x3)+L1.*M2.*lambda6.*sin(x3)+L2.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0+L1.*M1.*lambda6.*sin(x2.*2.0-x3)+L1.*M2.*lambda6.*sin(x2.*2.0-x3)-L1.*L2.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*2.0))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.^2.*m.*cos(x2-x3.*2.0).*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M2.^2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*2.0)-(M1.*M2.*m.*sin(x2.*2.0-x3.*2.0).*cos(x2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2)).*4.0)./L1,0.0,(m.*(L2.*M2.*lambda2.*sin(x2.*2.0-x3.*2.0)-L2.*M2.*lambda5.*x5.*cos(x2.*2.0-x3.*2.0).*2.0+L1.*M1.*lambda6.*x5.*cos(x2-x3).*2.0+L1.*M2.*lambda6.*x5.*cos(x2-x3).*2.0).*2.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L2.*M1.^2.*lambda2+L2.*M1.*M2.*lambda2+L2.*M1.*lambda2.*m.*2.0+L2.*M2.*lambda2.*m-L2.*M1.^2.*lambda2.*cos(x2.*2.0)-L2.*M2.*lambda2.*m.*cos(x2.*2.0-x3.*2.0)-L2.*M1.^2.*lambda5.*x5.*sin(x2.*2.0).*2.0-L2.*M1.*M2.*lambda2.*cos(x2.*2.0)+L1.*M1.*lambda6.*m.*x5.*sin(x2-x3).*4.0+L1.*M2.*lambda6.*m.*x5.*sin(x2-x3).*4.0+L1.*L2.*M1.^2.*lambda4.*x5.*sin(x2).*4.0-L2.*M1.*M2.*lambda5.*x5.*sin(x2.*2.0).*2.0-L2.*M2.*lambda5.*m.*x5.*sin(x2.*2.0-x3.*2.0).*2.0+L1.*L2.*M1.*M2.*lambda4.*x5.*sin(x2).*4.0).*2.0)./L2,(M2.*(L1.*lambda3.*m.*sin(x2.*2.0-x3.*2.0)-L2.*lambda5.*m.*x6.*cos(x2-x3).*2.0+L1.*lambda6.*m.*x6.*cos(x2.*2.0-x3.*2.0).*2.0+L2.*M1.*lambda5.*x6.*cos(x2+x3)-L2.*M1.*lambda5.*x6.*cos(x2-x3)-L1.*L2.*M1.*lambda4.*x6.*cos(x3)+L1.*L2.*M1.*lambda4.*x6.*cos(x2.*2.0-x3)).*2.0)./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(L1.*M1.^2.*lambda3+L1.*M1.*M2.*lambda3+L1.*M1.*lambda3.*m.*2.0+L1.*M2.*lambda3.*m-L1.*M1.^2.*lambda3.*cos(x2.*2.0)-L1.*M2.*lambda3.*m.*cos(x2.*2.0-x3.*2.0)-L1.*M1.*M2.*lambda3.*cos(x2.*2.0)-L2.*M1.*M2.*lambda5.*x6.*sin(x2-x3).*2.0-L2.*M2.*lambda5.*m.*x6.*sin(x2-x3).*4.0+L1.*M2.*lambda6.*m.*x6.*sin(x2.*2.0-x3.*2.0).*2.0-L2.*M1.*M2.*lambda5.*x6.*sin(x2+x3).*2.0+L1.*L2.*M1.*M2.*lambda4.*x6.*sin(x3).*2.0+L1.*L2.*M1.*M2.*lambda4.*x6.*sin(x2.*2.0-x3).*2.0).*2.0)./L1,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,(L1.*M1.*x5.*sin(x2).*(M1+M2).*4.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)),(x5.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*-2.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)),(L1.*m.*x5.*sin(x2-x3).*(M1+M2).*4.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))),0.0,(lambda5.*x5.*(M1.^2.*cos(x2.*2.0)+M1.*M2.*cos(x2.*2.0)+M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))-lambda5.*x5.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).^2.*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*4.0-(L1.*M1.*lambda4.*x5.*cos(x2).*(M1+M2).*4.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))-(L1.*lambda6.*m.*x5.*cos(x2-x3).*(M1+M2).*4.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+L1.*M1.*lambda4.*x5.*sin(x2).*(M1+M2).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*4.0+(L1.*lambda6.*m.*x5.*sin(x2-x3).*(M1+M2).*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*8.0)./L2,(m.*x5.*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(-L2.*M2.^2.*lambda5.*m+(L1.*M1.^3.*lambda6.*cos(x2.*3.0-x3))./2.0+(L1.*M1.^3.*lambda6.*cos(x2+x3))./2.0-L1.*M1.^3.*lambda6.*cos(x2-x3)-L1.*M1.*M2.^2.*lambda6.*cos(x2-x3)-L1.*M1.^2.*M2.*lambda6.*cos(x2-x3).*2.0-L1.*M1.^2.*lambda6.*m.*cos(x2-x3).*2.0+(L1.*M2.^2.*lambda6.*m.*cos(x2-x3))./2.0-L2.*M1.*M2.^2.*lambda5.*cos(x3.*2.0)-L2.*M1.^2.*M2.*lambda5.*cos(x3.*2.0)+(L1.*M1.*M2.^2.*lambda6.*cos(x2.*3.0-x3))./2.0+L1.*M1.^2.*M2.*lambda6.*cos(x2.*3.0-x3)+L2.*M1.*M2.^2.*lambda5.*cos(x2.*2.0-x3.*2.0)+L2.*M1.^2.*M2.*lambda5.*cos(x2.*2.0-x3.*2.0)+L2.*M2.^2.*lambda5.*m.*cos(x2.*2.0-x3.*2.0)-(L1.*M2.^2.*lambda6.*m.*cos(x2.*3.0-x3.*3.0))./2.0+(L1.*M1.*M2.^2.*lambda6.*cos(x2+x3))./2.0+L1.*M1.^2.*M2.*lambda6.*cos(x2+x3)-L1.*M1.*M2.*lambda6.*m.*cos(x2-x3).*(3.0./2.0)+L1.*L2.*M1.*M2.^2.*lambda4.*cos(x2-x3.*2.0)+L1.*L2.*M1.^2.*M2.*lambda4.*cos(x2-x3.*2.0)+L2.*M1.*M2.*lambda5.*m.*cos(x2.*2.0-x3.*2.0).*2.0-(L1.*M1.*M2.*lambda6.*m.*cos(x2.*3.0-x3.*3.0))./2.0-L1.*L2.*M1.*M2.^2.*lambda4.*cos(x2.*3.0-x3.*2.0)-L1.*L2.*M1.^2.*M2.*lambda4.*cos(x2.*3.0-x3.*2.0)).*-4.0)./L2,0.0,-(L2.*M1.^2.*lambda5.*sin(x2.*2.0).*-2.0-L2.*M2.*lambda5.*m.*sin(x2.*2.0-x3.*2.0).*2.0+L1.*M1.*lambda6.*m.*sin(x2-x3).*4.0+L1.*M2.*lambda6.*m.*sin(x2-x3).*4.0+L1.*L2.*M1.^2.*lambda4.*sin(x2).*4.0-L2.*M1.*M2.*lambda5.*sin(x2.*2.0).*2.0+L1.*L2.*M1.*M2.*lambda4.*sin(x2).*4.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))),0.0,0.0,0.0,1.0,(L2.*M1.*M2.*x6.*(sin(x2.*2.0-x3)+sin(x3)).*2.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)),(L2.*M2.*x6.*(M1.*sin(x2+x3)+M1.*sin(x2-x3)+m.*sin(x2-x3).*2.0).*-2.0)./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))),(M2.*m.*x6.*sin(x2.*2.0-x3.*2.0).*2.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)),0.0,(M2.*lambda6.*m.*x6.*cos(x2.*2.0-x3.*2.0).*-4.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))-(L2.*M1.*M2.*lambda4.*x6.*cos(x2.*2.0-x3).*4.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))+(L2.*M2.*lambda5.*x6.*(M1.*cos(x2+x3)+M1.*cos(x2-x3)+m.*cos(x2-x3).*2.0).*2.0)./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+M2.*lambda6.*m.*x6.*sin(x2.*2.0-x3.*2.0).*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*4.0+L2.*M1.*M2.*lambda4.*x6.*(sin(x2.*2.0-x3)+sin(x3)).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*2.0-(L2.*M2.*lambda5.*x6.*(M1.*sin(x2+x3)+M1.*sin(x2-x3)+m.*sin(x2-x3).*2.0).*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*4.0)./L1,(M2.*lambda6.*m.*x6.*cos(x2.*2.0-x3.*2.0).*4.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))-M2.^2.*lambda6.*m.^2.*x6.*sin(x2.*2.0-x3.*2.0).^2.*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*4.0-(L2.*M2.*lambda5.*x6.*(-M1.*cos(x2+x3)+M1.*cos(x2-x3)+m.*cos(x2-x3).*2.0).*2.0)./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(L2.*M1.*M2.*lambda4.*x6.*(cos(x2.*2.0-x3)-cos(x3)).*2.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))+(L2.*M2.^2.*lambda5.*m.*x6.*sin(x2.*2.0-x3.*2.0).*(M1.*sin(x2+x3)+M1.*sin(x2-x3)+m.*sin(x2-x3).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*4.0)./L1-L2.*M1.*M2.^2.*lambda4.*m.*x6.*sin(x2.*2.0-x3.*2.0).*(sin(x2.*2.0-x3)+sin(x3)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*4.0,0.0,0.0,(M2.*(L1.*lambda6.*m.*sin(x2.*2.0-x3.*2.0)-L2.*M1.*lambda5.*sin(x2+x3)-L2.*M1.*lambda5.*sin(x2-x3)-L2.*lambda5.*m.*sin(x2-x3).*2.0+L1.*L2.*M1.*lambda4.*sin(x2.*2.0-x3)+L1.*L2.*M1.*lambda4.*sin(x3)).*-2.0)./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))),0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,(M2.^2.*cos(x2.*2.0-x3.*2.0).*-4.0+M2.^2.*cos(x2.*4.0-x3.*4.0)+M1.^2.*8.0+M2.^2.*3.0+M1.*M2.*8.0-M1.*M2.*cos(x2.*2.0-x3.*2.0).*8.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(-1.0./4.0),(1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M2.^2.*cos(x2-x3.*2.0).*(3.0./2.0)+(M2.^2.*cos(x2.*3.0-x3.*2.0))./2.0-(M2.^2.*cos(x2.*3.0-x3.*4.0))./2.0-M1.^2.*cos(x2).*4.0-M2.^2.*cos(x2).*(3.0./2.0)+M1.*M2.*cos(x2-x3.*2.0).*3.0+M1.*M2.*cos(x2.*3.0-x3.*2.0)-M1.*M2.*cos(x2).*4.0).*(-1.0./2.0))./L1,((M1./8.0+M2./8.0).*(M1.*cos(x2.*2.0-x3).*4.0+M2.*cos(x2.*2.0-x3).*3.0+M2.*cos(x2.*2.0-x3.*3.0)-M2.*cos(x2.*4.0-x3.*3.0)-M1.*cos(x3).*4.0-M2.*cos(x3).*3.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*-2.0)./L2,0.0,-(M1.^2.*g.*cos(x2.*2.0).*2.0+L1.*M1.^2.*x5.^2.*cos(x2).*2.0+M1.*M2.*g.*cos(x2.*2.0).*2.0+L2.*M1.*M2.*x6.^2.*cos(x2.*2.0-x3).*2.0+L1.*M1.*M2.*x5.^2.*cos(x2).*2.0+(M2.*sin(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))))./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))+(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2.*2.0)+L1.*M1.^2.*x5.^2.*sin(x2).*2.0+M1.*M2.*g.*sin(x2.*2.0)+L1.*M1.*M2.*x5.^2.*sin(x2).*2.0+L2.*M1.*M2.*x6.^2.*sin(x3)+L2.*M1.*M2.*x6.^2.*sin(x2.*2.0-x3)+(M1.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*cos(x2.*2.0-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0))-(lambda5.*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M2.^2.*sin(x2-x3.*2.0)+M2.^2.*sin(x2.*3.0-x3.*2.0)-M2.^2.*sin(x2.*3.0-x3.*4.0)-M1.^2.*sin(x2).*8.0-M2.^2.*sin(x2)+M1.*M2.*sin(x2-x3.*2.0).*2.0+M1.*M2.*sin(x2.*3.0-x3.*2.0).*2.0-M1.*M2.*sin(x2).*8.0))./(L1.*4.0)-(lambda4.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*(M2.^2.*cos(x2.*2.0-x3.*2.0).*-4.0+M2.^2.*cos(x2.*4.0-x3.*4.0)+M1.^2.*8.0+M2.^2.*3.0+M1.*M2.*8.0-M1.*M2.*cos(x2.*2.0-x3.*2.0).*8.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3)./4.0-(lambda5.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M2.^2.*cos(x2-x3.*2.0).*(3.0./2.0)+(M2.^2.*cos(x2.*3.0-x3.*2.0))./2.0-(M2.^2.*cos(x2.*3.0-x3.*4.0))./2.0-M1.^2.*cos(x2).*4.0-M2.^2.*cos(x2).*(3.0./2.0)+M1.*M2.*cos(x2-x3.*2.0).*3.0+M1.*M2.*cos(x2.*3.0-x3.*2.0)-M1.*M2.*cos(x2).*4.0))./L1-(lambda6.*(M1./4.0+M2./4.0).*(M1.*sin(x2.*2.0-x3).*4.0+M2.*sin(x2.*2.0-x3).*2.0-M2.*sin(x2.*4.0-x3.*3.0)-M2.*sin(x3)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*2.0)./L2+M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*(M1.*2.0+M2-M2.*cos(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2-(lambda6.*(M1./8.0+M2./8.0).*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*(M1.*cos(x2.*2.0-x3).*4.0+M2.*cos(x2.*2.0-x3).*3.0+M2.*cos(x2.*2.0-x3.*3.0)-M2.*cos(x2.*4.0-x3.*3.0)-M1.*cos(x3).*4.0-M2.*cos(x3).*3.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*4.0)./L2,(L1.*M1.^4.*lambda6.*sin(x2.*2.0-x3).*1.2e+1-L1.*M1.^4.*lambda6.*sin(x2.*4.0-x3).*4.0+L1.*M1.^4.*lambda6.*sin(x3).*1.2e+1-L1.*M1.^4.*lambda6.*sin(x2.*2.0+x3).*4.0+L1.*M1.^3.*lambda6.*m.*sin(x3).*1.6e+1+L2.*M2.^3.*lambda5.*m.*sin(x2).*1.2e+1-L1.*M2.^3.*lambda6.*m.*sin(x3).*2.0-L1.*M1.*M2.^3.*lambda6.*sin(x2.*2.0+x3).*3.0-L1.*M1.^3.*M2.*lambda6.*sin(x2.*2.0+x3).*1.1e+1+L2.*M1.*M2.^3.*lambda5.*sin(x2-x3.*2.0).*1.0e+1+L2.*M1.*M2.^3.*lambda5.*sin(x2+x3.*2.0).*6.0+L2.*M1.^3.*M2.*lambda5.*sin(x2-x3.*2.0).*2.0e+1+L2.*M1.^3.*M2.*lambda5.*sin(x2+x3.*2.0).*1.2e+1+L2.*M1.*M2.^3.*lambda5.*sin(x2-x3.*4.0).*4.0+L2.*M2.^3.*lambda5.*m.*sin(x2-x3.*2.0).*8.0+L1.*M1.*M2.^3.*lambda6.*sin(x3.*3.0).*3.0+L1.*M1.^3.*M2.*lambda6.*sin(x3.*3.0).*3.0+L1.*M1.^2.*M2.^2.*lambda6.*sin(x3).*3.0e+1+L1.*M1.*M2.^3.*lambda6.*sin(x2.*2.0-x3).*9.0+L1.*M1.^3.*M2.*lambda6.*sin(x2.*2.0-x3).*3.3e+1+L1.*M1.*M2.^3.*lambda6.*sin(x2.*2.0-x3.*3.0).*9.0-L1.*M1.*M2.^3.*lambda6.*sin(x2.*4.0-x3).*3.0+L1.*M1.^3.*M2.*lambda6.*sin(x2.*2.0-x3.*3.0).*9.0-L1.*M1.^3.*M2.*lambda6.*sin(x2.*4.0-x3).*1.1e+1-L2.*M1.*M2.^3.*lambda5.*sin(x2.*3.0-x3.*2.0).*2.0-L2.*M1.^3.*M2.*lambda5.*sin(x2.*3.0-x3.*2.0).*4.0-L1.*M1.*M2.^3.*lambda6.*sin(x2.*4.0-x3.*3.0).*9.0-L1.*M1.^3.*M2.*lambda6.*sin(x2.*4.0-x3.*3.0).*9.0-L2.*M1.*M2.^3.*lambda5.*sin(x2.*3.0-x3.*4.0).*8.0-L2.*M1.*M2.^3.*lambda5.*sin(x2.*5.0-x3.*2.0).*2.0-L2.*M1.^3.*M2.*lambda5.*sin(x2.*5.0-x3.*2.0).*4.0+L1.*M1.*M2.^3.*lambda6.*sin(x2.*6.0-x3.*3.0).*3.0+L1.*M1.^3.*M2.*lambda6.*sin(x2.*6.0-x3.*3.0).*3.0+L2.*M1.*M2.^3.*lambda5.*sin(x2.*5.0-x3.*4.0).*4.0-L1.*M1.^2.*M2.^2.*lambda6.*sin(x2.*2.0+x3).*1.0e+1+L2.*M1.^2.*M2.^2.*lambda5.*sin(x2-x3.*2.0).*3.0e+1+L2.*M1.^2.*M2.^2.*lambda5.*sin(x2+x3.*2.0).*1.8e+1+L2.*M1.^2.*M2.^2.*lambda5.*sin(x2-x3.*4.0).*4.0+L1.*M1.^3.*lambda6.*m.*sin(x2.*2.0-x3).*1.6e+1-L1.*M2.^3.*lambda6.*m.*sin(x2.*2.0-x3).*2.0-L1.*M2.^3.*lambda6.*m.*sin(x2.*2.0-x3.*3.0).*3.0-L2.*M2.^3.*lambda5.*m.*sin(x2.*3.0-x3.*2.0).*8.0+L1.*M2.^3.*lambda6.*m.*sin(x2.*4.0-x3.*3.0).*3.0-L2.*M2.^3.*lambda5.*m.*sin(x2.*3.0-x3.*4.0).*2.0+L1.*M2.^3.*lambda6.*m.*sin(x2.*4.0-x3.*5.0)+L2.*M2.^3.*lambda5.*m.*sin(x2.*5.0-x3.*4.0).*2.0-L1.*M2.^3.*lambda6.*m.*sin(x2.*6.0-x3.*5.0)+L1.*M1.^2.*M2.^2.*lambda6.*sin(x3.*3.0).*6.0+L1.*M1.^2.*M2.^2.*lambda6.*sin(x2.*2.0-x3).*3.0e+1+L1.*M1.^2.*M2.^2.*lambda6.*sin(x2.*2.0-x3.*3.0).*1.8e+1-L1.*M1.^2.*M2.^2.*lambda6.*sin(x2.*4.0-x3).*1.0e+1-L2.*M1.^2.*M2.^2.*lambda5.*sin(x2.*3.0-x3.*2.0).*6.0-L1.*M1.^2.*M2.^2.*lambda6.*sin(x2.*4.0-x3.*3.0).*1.8e+1-L2.*M1.^2.*M2.^2.*lambda5.*sin(x2.*3.0-x3.*4.0).*8.0-L2.*M1.^2.*M2.^2.*lambda5.*sin(x2.*5.0-x3.*2.0).*6.0+L1.*M1.^2.*M2.^2.*lambda6.*sin(x2.*6.0-x3.*3.0).*6.0+L2.*M1.^2.*M2.^2.*lambda5.*sin(x2.*5.0-x3.*4.0).*4.0+L1.*M1.*M2.^3.*lambda6.*sin(x3).*9.0+L1.*M1.^3.*M2.*lambda6.*sin(x3).*3.3e+1-L1.*L2.^2.*M1.^5.*M2.*x6.^2.*cos(x3).*2.0e+1-L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x3.*2.0).*2.4e+1+L1.*L2.^2.*M1.^5.*M2.*x6.^2.*cos(x2.*2.0+x3).*1.0e+1-L1.*L2.^2.*M1.^5.*M2.*x6.^2.*cos(x2.*4.0+x3).*2.0-L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x2.*2.0-x3.*2.0).*4.8e+1-L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x2.*2.0-x3.*4.0).*4.0+L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x2.*4.0-x3.*2.0).*2.4e+1+L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x2.*4.0-x3.*4.0).*8.0-L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x2.*6.0-x3.*4.0).*4.0-L1.*L2.^2.*M1.^3.*M2.^3.*x6.^2.*cos(x3).*2.0e+1-L1.*L2.^2.*M1.^4.*M2.^2.*x6.^2.*cos(x3).*4.0e+1+L2.*M1.*M2.^2.*lambda5.*m.*sin(x2).*2.4e+1-L1.*M1.*M2.^2.*lambda6.*m.*sin(x3).*2.0+L1.*M1.^2.*M2.*lambda6.*m.*sin(x3).*1.6e+1+L1.*L2.^2.*M1.^5.*M2.*x6.^2.*cos(x2.*2.0-x3).*2.0e+1-L1.*L2.^2.*M1.^5.*M2.*x6.^2.*cos(x2.*4.0-x3).*1.0e+1+L1.*L2.^2.*M1.^5.*M2.*x6.^2.*cos(x2.*6.0-x3).*2.0+L1.*L2.^2.*M1.^3.*M2.^3.*x6.^2.*cos(x2.*2.0+x3).*1.0e+1+L1.*L2.^2.*M1.^4.*M2.^2.*x6.^2.*cos(x2.*2.0+x3).*2.0e+1-L1.*L2.^2.*M1.^3.*M2.^3.*x6.^2.*cos(x2.*4.0+x3).*2.0-L1.*L2.^2.*M1.^4.*M2.^2.*x6.^2.*cos(x2.*4.0+x3).*4.0+L2.*M1.*M2.^2.*lambda5.*m.*sin(x2-x3.*2.0).*1.6e+1+L2.*M1.^2.*M2.*lambda5.*m.*sin(x2-x3.*2.0).*1.6e+1-L1.*L2.*M1.*M2.^3.*lambda4.*sin(x3.*2.0).*8.0-L1.*L2.*M1.^3.*M2.*lambda4.*sin(x3.*2.0).*1.6e+1-L1.*L2.*M1.*M2.^3.*lambda4.*sin(x2.*2.0-x3.*2.0).*1.6e+1-L1.*L2.*M1.^3.*M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*3.2e+1-L1.*L2.*M1.*M2.^3.*lambda4.*sin(x2.*2.0-x3.*4.0).*4.0+L1.*L2.*M1.*M2.^3.*lambda4.*sin(x2.*4.0-x3.*2.0).*8.0+L1.*L2.*M1.^3.*M2.*lambda4.*sin(x2.*4.0-x3.*2.0).*1.6e+1+L1.*L2.*M1.*M2.^3.*lambda4.*sin(x2.*4.0-x3.*4.0).*8.0-L1.*L2.*M1.*M2.^3.*lambda4.*sin(x2.*6.0-x3.*4.0).*4.0+L1.*L2.^2.*M1.^3.*M2.^3.*x6.^2.*cos(x2.*2.0-x3).*2.0e+1+L1.*L2.^2.*M1.^4.*M2.^2.*x6.^2.*cos(x2.*2.0-x3).*4.0e+1-L1.*L2.^2.*M1.^3.*M2.^3.*x6.^2.*cos(x2.*4.0-x3).*1.0e+1-L1.*L2.^2.*M1.^4.*M2.^2.*x6.^2.*cos(x2.*4.0-x3).*2.0e+1+L1.*L2.^2.*M1.^3.*M2.^3.*x6.^2.*cos(x2.*6.0-x3).*2.0+L1.*L2.^2.*M1.^4.*M2.^2.*x6.^2.*cos(x2.*6.0-x3).*4.0-L1.*M1.*M2.^2.*lambda6.*m.*sin(x2.*2.0-x3).*2.0+L1.*M1.^2.*M2.*lambda6.*m.*sin(x2.*2.0-x3).*1.6e+1-L1.*M1.*M2.^2.*lambda6.*m.*sin(x2.*2.0-x3.*3.0).*3.0-L2.*M1.*M2.^2.*lambda5.*m.*sin(x2.*3.0-x3.*2.0).*1.6e+1-L2.*M1.^2.*M2.*lambda5.*m.*sin(x2.*3.0-x3.*2.0).*1.6e+1+L1.*M1.*M2.^2.*lambda6.*m.*sin(x2.*4.0-x3.*3.0).*3.0-L2.*M1.*M2.^2.*lambda5.*m.*sin(x2.*3.0-x3.*4.0).*4.0+L1.*M1.*M2.^2.*lambda6.*m.*sin(x2.*4.0-x3.*5.0)+L2.*M1.*M2.^2.*lambda5.*m.*sin(x2.*5.0-x3.*4.0).*4.0-L1.*M1.*M2.^2.*lambda6.*m.*sin(x2.*6.0-x3.*5.0)+L1.*L2.^2.*M1.^4.*M2.*m.*x6.^2.*cos(x2.*2.0-x3).*4.8e+1+L1.^2.*L2.*M1.^4.*M2.*m.*x5.^2.*cos(x2.*3.0-x3.*2.0).*2.4e+1-L1.*L2.^2.*M1.^4.*M2.*m.*x6.^2.*cos(x2.*4.0-x3).*1.6e+1-L1.^2.*L2.*M1.^4.*M2.*m.*x5.^2.*cos(x2.*5.0-x3.*2.0).*8.0-L1.^2.*L2.*M1.*M2.^3.*m.^2.*x5.^2.*cos(x2-x3.*2.0).*1.6e+1-L1.^2.*L2.*M1.^2.*M2.^3.*m.*x5.^2.*cos(x2-x3.*2.0).*2.4e+1+L1.^2.*L2.*M1.^2.*M2.^3.*m.*x5.^2.*cos(x2+x3.*2.0).*8.0-L1.^2.*L2.*M1.^3.*M2.*m.^2.*x5.^2.*cos(x2-x3.*2.0).*3.2e+1-L1.^2.*L2.*M1.^3.*M2.^2.*m.*x5.^2.*cos(x2-x3.*2.0).*4.8e+1+L1.^2.*L2.*M1.^3.*M2.^2.*m.*x5.^2.*cos(x2+x3.*2.0).*1.6e+1+L1.*L2.^2.*M1.^2.*M2.^3.*m.*x6.^2.*cos(x2.*2.0+x3).*1.6e+1+L1.*L2.^2.*M1.^3.*M2.^2.*m.*x6.^2.*cos(x2.*2.0+x3).*3.2e+1-L1.*L2.^2.*M1.^2.*M2.^2.*m.^2.*x6.^2.*cos(x3).*6.4e+1+L1.*L2.*M1.^4.*M2.*g.*m.*cos(x2.*2.0+x3.*2.0).*4.0+L1.*L2.*M1.^4.*M2.*g.*m.*cos(x2.*4.0-x3.*2.0).*8.0-L1.*L2.*M1.^4.*M2.*g.*m.*cos(x2.*6.0-x3.*2.0).*4.0-L1.*L2.*M1.*M2.^3.*g.*m.^2.*cos(x3.*2.0).*8.0-L1.*L2.*M1.^2.*M2.^3.*g.*m.*cos(x3.*2.0).*8.0-L1.*L2.*M1.^3.*M2.*g.*m.^2.*cos(x3.*2.0).*1.6e+1-L1.*L2.*M1.^3.*M2.^2.*g.*m.*cos(x3.*2.0).*1.6e+1+L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x2.*2.0-x3).*2.8e+1+L1.*L2.^2.*M1.^2.*M2.^3.*m.*x6.^2.*cos(x2.*2.0-x3).*4.8e+1+L1.*L2.^2.*M1.^3.*M2.*m.^2.*x6.^2.*cos(x2.*2.0-x3).*3.2e+1+L1.*L2.^2.*M1.^3.*M2.^2.*m.*x6.^2.*cos(x2.*2.0-x3).*9.6e+1+L1.^2.*L2.*M1.*M2.^3.*m.^2.*x5.^2.*cos(x2.*3.0-x3.*2.0).*1.6e+1+L1.^2.*L2.*M1.^2.*M2.^3.*m.*x5.^2.*cos(x2.*3.0-x3.*2.0).*2.4e+1+L1.^2.*L2.*M1.^3.*M2.*m.^2.*x5.^2.*cos(x2.*3.0-x3.*2.0).*3.2e+1+L1.^2.*L2.*M1.^3.*M2.^2.*m.*x5.^2.*cos(x2.*3.0-x3.*2.0).*4.8e+1+L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x2.*2.0-x3.*3.0).*6.0-L1.*L2.^2.*M1.^2.*M2.^3.*m.*x6.^2.*cos(x2.*4.0-x3).*1.6e+1-L1.*L2.^2.*M1.^3.*M2.^2.*m.*x6.^2.*cos(x2.*4.0-x3).*3.2e+1+L1.^2.*L2.*M1.*M2.^3.*m.^2.*x5.^2.*cos(x2.*3.0-x3.*4.0).*8.0-L1.^2.*L2.*M1.^2.*M2.^3.*m.*x5.^2.*cos(x2.*5.0-x3.*2.0).*8.0-L1.^2.*L2.*M1.^3.*M2.^2.*m.*x5.^2.*cos(x2.*5.0-x3.*2.0).*1.6e+1-L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x2.*4.0-x3.*3.0).*6.0-L1.^2.*L2.*M1.*M2.^3.*m.^2.*x5.^2.*cos(x2.*5.0-x3.*4.0).*8.0+L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x2.*4.0-x3.*5.0).*2.0-L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x2.*6.0-x3.*5.0).*2.0-L1.^2.*L2.*M1.^2.*M2.^2.*m.^2.*x5.^2.*cos(x2-x3.*2.0).*4.8e+1-L1.*L2.^2.*M1.^4.*M2.*m.*x6.^2.*cos(x3).*4.8e+1+L1.*L2.*M1.^2.*M2.^3.*g.*m.*cos(x2.*2.0+x3.*2.0).*4.0+L1.*L2.*M1.^3.*M2.^2.*g.*m.*cos(x2.*2.0+x3.*2.0).*8.0+L1.*L2.*M1.*M2.^3.*g.*m.^2.*cos(x2.*2.0-x3.*4.0).*4.0+L1.*L2.*M1.*M2.^3.*g.*m.^2.*cos(x2.*4.0-x3.*2.0).*8.0+L1.*L2.*M1.^2.*M2.^3.*g.*m.*cos(x2.*4.0-x3.*2.0).*8.0+L1.*L2.*M1.^3.*M2.*g.*m.^2.*cos(x2.*4.0-x3.*2.0).*1.6e+1+L1.*L2.*M1.^3.*M2.^2.*g.*m.*cos(x2.*4.0-x3.*2.0).*1.6e+1-L1.*L2.*M1.^2.*M2.^3.*g.*m.*cos(x2.*6.0-x3.*2.0).*4.0-L1.*L2.*M1.^3.*M2.^2.*g.*m.*cos(x2.*6.0-x3.*2.0).*8.0-L1.*L2.*M1.*M2.^3.*g.*m.^2.*cos(x2.*6.0-x3.*4.0).*4.0-L1.^2.*L2.*M1.^4.*M2.*m.*x5.^2.*cos(x2-x3.*2.0).*2.4e+1+L1.^2.*L2.*M1.^4.*M2.*m.*x5.^2.*cos(x2+x3.*2.0).*8.0+L1.*L2.^2.*M1.^4.*M2.*m.*x6.^2.*cos(x2.*2.0+x3).*1.6e+1-L1.*L2.*M1.^2.*M2.^2.*g.*m.^2.*cos(x3.*2.0).*2.4e+1+L1.*L2.^2.*M1.^2.*M2.^2.*m.^2.*x6.^2.*cos(x2.*2.0-x3).*6.4e+1+L1.^2.*L2.*M1.^2.*M2.^2.*m.^2.*x5.^2.*cos(x2.*3.0-x3.*2.0).*4.8e+1+L1.^2.*L2.*M1.^2.*M2.^2.*m.^2.*x5.^2.*cos(x2.*3.0-x3.*4.0).*8.0-L1.^2.*L2.*M1.^2.*M2.^2.*m.^2.*x5.^2.*cos(x2.*5.0-x3.*4.0).*8.0-L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x3).*2.8e+1-L1.*L2.^2.*M1.^2.*M2.^3.*m.*x6.^2.*cos(x3).*4.8e+1-L1.*L2.^2.*M1.^3.*M2.*m.^2.*x6.^2.*cos(x3).*3.2e+1-L1.*L2.^2.*M1.^3.*M2.^2.*m.*x6.^2.*cos(x3).*9.6e+1+L1.*L2.*M1.^2.*M2.^2.*g.*m.^2.*cos(x2.*2.0-x3.*4.0).*4.0+L1.*L2.*M1.^2.*M2.^2.*g.*m.^2.*cos(x2.*4.0-x3.*2.0).*2.4e+1-L1.*L2.*M1.^2.*M2.^2.*g.*m.^2.*cos(x2.*6.0-x3.*4.0).*4.0-L1.*L2.*M1.^4.*M2.*g.*m.*cos(x3.*2.0).*8.0)./(L1.*L2.*(M1.^6.*cos(x2.*2.0).*-1.5e+1+M1.^6.*cos(x2.*4.0).*6.0-M1.^6.*cos(x2.*6.0)+M1.^5.*M2.*3.0e+1+M1.^5.*m.*3.6e+1+M1.^6.*1.0e+1+M1.^3.*M2.^3.*1.0e+1+M1.^4.*M2.^2.*3.0e+1+M1.^3.*m.^3.*3.2e+1+M1.^4.*m.^2.*4.8e+1+M2.^3.*m.^3.*1.0e+1-M1.^4.*m.^2.*cos(x2.*2.0).*4.8e+1+M1.*M2.^2.*m.^3.*3.6e+1+M1.*M2.^3.*m.^2.*1.8e+1+M1.^2.*M2.*m.^3.*4.8e+1+M1.^2.*M2.^3.*m.*1.8e+1+M1.^3.*M2.*m.^2.*9.6e+1+M1.^3.*M2.^2.*m.*7.2e+1-M2.^3.*m.^3.*cos(x2.*2.0-x3.*2.0).*1.5e+1+M2.^3.*m.^3.*cos(x2.*4.0-x3.*4.0).*6.0-M2.^3.*m.^3.*cos(x2.*6.0-x3.*6.0)+M1.^2.*M2.^2.*m.^2.*6.6e+1-M1.^5.*M2.*cos(x2.*2.0).*4.5e+1+M1.^5.*M2.*cos(x2.*4.0).*1.8e+1-M1.^5.*M2.*cos(x2.*6.0).*3.0-M1.^5.*m.*cos(x2.*2.0).*4.8e+1+M1.^5.*m.*cos(x2.*4.0).*1.2e+1+M1.^4.*M2.*m.*9.0e+1-M1.^3.*M2.^3.*cos(x2.*2.0).*1.5e+1-M1.^4.*M2.^2.*cos(x2.*2.0).*4.5e+1+M1.^3.*M2.^3.*cos(x2.*4.0).*6.0+M1.^4.*M2.^2.*cos(x2.*4.0).*1.8e+1-M1.^3.*M2.^3.*cos(x2.*6.0)-M1.^4.*M2.^2.*cos(x2.*6.0).*3.0-M1.^4.*M2.*m.*cos(x2.*2.0).*1.2e+2+M1.^4.*M2.*m.*cos(x3.*2.0).*1.2e+1+M1.^4.*M2.*m.*cos(x2.*4.0).*3.0e+1-M1.^4.*M2.*m.*cos(x2.*2.0-x3.*2.0).*1.8e+1-M1.^4.*M2.*m.*cos(x2.*2.0+x3.*2.0).*3.0+M1.^4.*M2.*m.*cos(x2.*4.0-x3.*2.0).*1.2e+1-M1.^4.*M2.*m.*cos(x2.*6.0-x3.*2.0).*3.0-M1.*M2.^3.*m.^2.*cos(x2.*2.0).*1.8e+1-M1.^2.*M2.^3.*m.*cos(x2.*2.0).*2.4e+1-M1.^3.*M2.*m.^2.*cos(x2.*2.0).*9.6e+1-M1.^3.*M2.^2.*m.*cos(x2.*2.0).*9.6e+1+M1.*M2.^3.*m.^2.*cos(x3.*2.0).*1.2e+1+M1.^2.*M2.^3.*m.*cos(x3.*2.0).*1.2e+1+M1.^3.*M2.*m.^2.*cos(x3.*2.0).*2.4e+1+M1.^3.*M2.^2.*m.*cos(x3.*2.0).*2.4e+1+M1.^2.*M2.^3.*m.*cos(x2.*4.0).*6.0+M1.^3.*M2.^2.*m.*cos(x2.*4.0).*2.4e+1-M1.*M2.^2.*m.^3.*cos(x2.*2.0-x3.*2.0).*4.8e+1-M1.*M2.^3.*m.^2.*cos(x2.*2.0-x3.*2.0).*2.4e+1-M1.^2.*M2.*m.^3.*cos(x2.*2.0-x3.*2.0).*4.8e+1-M1.^2.*M2.^3.*m.*cos(x2.*2.0-x3.*2.0).*1.8e+1-M1.^2.*M2.^3.*m.*cos(x2.*2.0+x3.*2.0).*3.0-M1.^3.*M2.*m.^2.*cos(x2.*2.0-x3.*2.0).*4.8e+1-M1.^3.*M2.^2.*m.*cos(x2.*2.0-x3.*2.0).*3.6e+1-M1.^3.*M2.^2.*m.*cos(x2.*2.0+x3.*2.0).*6.0-M1.*M2.^3.*m.^2.*cos(x2.*2.0-x3.*4.0).*3.0+M1.*M2.^3.*m.^2.*cos(x2.*4.0-x3.*2.0).*1.2e+1+M1.^2.*M2.^3.*m.*cos(x2.*4.0-x3.*2.0).*1.2e+1+M1.^3.*M2.*m.^2.*cos(x2.*4.0-x3.*2.0).*2.4e+1+M1.^3.*M2.^2.*m.*cos(x2.*4.0-x3.*2.0).*2.4e+1+M1.*M2.^2.*m.^3.*cos(x2.*4.0-x3.*4.0).*1.2e+1+M1.*M2.^3.*m.^2.*cos(x2.*4.0-x3.*4.0).*6.0-M1.^2.*M2.^3.*m.*cos(x2.*6.0-x3.*2.0).*3.0-M1.^3.*M2.^2.*m.*cos(x2.*6.0-x3.*2.0).*6.0-M1.*M2.^3.*m.^2.*cos(x2.*6.0-x3.*4.0).*3.0-M1.^2.*M2.^2.*m.^2.*cos(x2.*2.0).*6.6e+1+M1.^2.*M2.^2.*m.^2.*cos(x3.*2.0).*3.6e+1-M1.^2.*M2.^2.*m.^2.*cos(x2.*2.0-x3.*2.0).*7.2e+1-M1.^2.*M2.^2.*m.^2.*cos(x2.*2.0-x3.*4.0).*3.0+M1.^2.*M2.^2.*m.^2.*cos(x2.*4.0-x3.*2.0).*3.6e+1+M1.^2.*M2.^2.*m.^2.*cos(x2.*4.0-x3.*4.0).*6.0-M1.^2.*M2.^2.*m.^2.*cos(x2.*6.0-x3.*4.0).*3.0).*2.0),0.0,(L1.*M1.*x5.*sin(x2).*(M1+M2).*-4.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)),(L2.*M1.*M2.*x6.*(sin(x2.*2.0-x3)+sin(x3)).*-2.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)),0.0,0.0,0.0,(1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M2.^2.*cos(x2-x3.*2.0).*3.0+M2.^2.*cos(x2.*3.0-x3.*2.0)-M2.^2.*cos(x2.*3.0-x3.*4.0)-M1.^2.*cos(x2).*8.0-M2.^2.*cos(x2).*3.0+M1.*M2.*cos(x2-x3.*2.0).*6.0+M1.*M2.*cos(x2.*3.0-x3.*2.0).*2.0-M1.*M2.*cos(x2).*8.0).*(-1.0./4.0))./L1,1.0./L1.^2.*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*cos(x2.*2.0).*2.0+(M2.^2.*cos(x2.*2.0))./2.0-M2.^2.*cos(x3.*2.0)-M2.^2.*cos(x2.*2.0-x3.*2.0)+(M2.^2.*cos(x2.*2.0-x3.*4.0))./2.0+M1.^2.*2.0+M2.^2+M1.*M2.*2.0+M1.*M2.*cos(x2.*2.0).*2.0-M1.*M2.*cos(x3.*2.0).*2.0-M1.*M2.*cos(x2.*2.0-x3.*2.0).*2.0).*(-1.0./2.0),((M1+M2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.*cos(x2.*3.0-x3).*2.0+M2.*cos(x2.*3.0-x3)-M2.*cos(x2.*3.0-x3.*3.0)-M1.*cos(x2+x3).*2.0-M2.*cos(x2+x3).*2.0+M2.*cos(x2-x3)+M2.*cos(x2-x3.*3.0)))./(L1.*L2.*4.0),0.0,(M1.^2.*g.*cos(x2).*2.0+M1.*M2.*g.*cos(x2).*2.0+M1.*g.*m.*cos(x2).*2.0+M2.*g.*m.*cos(x2)+L1.*M1.^2.*x5.^2.*cos(x2.*2.0).*2.0+M2.*g.*m.*cos(x2-x3.*2.0)+L2.*M1.*M2.*x6.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2-x3).*2.0+L1.*M1.*M2.*x5.^2.*cos(x2.*2.0).*2.0+L1.*M2.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0).*2.0+L2.*M1.*M2.*x6.^2.*cos(x2+x3)-(M1.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-(M2.*sin(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0))./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))-((M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*4.0)./L1-(1.0./L1.^2.*lambda5.*(M1.^2.*sin(x2.*2.0).*4.0+M2.^2.*sin(x2.*2.0)-M2.^2.*sin(x2.*2.0-x3.*2.0).*2.0+M2.^2.*sin(x2.*2.0-x3.*4.0)+M1.*M2.*sin(x2.*2.0).*4.0-M1.*M2.*sin(x2.*2.0-x3.*2.0).*4.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2)./4.0-(lambda4.*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M2.^2.*cos(x2-x3.*2.0).*3.0+M2.^2.*cos(x2.*3.0-x3.*2.0)-M2.^2.*cos(x2.*3.0-x3.*4.0)-M1.^2.*cos(x2).*8.0-M2.^2.*cos(x2).*3.0+M1.*M2.*cos(x2-x3.*2.0).*6.0+M1.*M2.*cos(x2.*3.0-x3.*2.0).*2.0-M1.*M2.*cos(x2).*8.0))./(L1.*4.0)-1.0./L1.^2.*lambda5.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.^2.*cos(x2.*2.0).*2.0+(M2.^2.*cos(x2.*2.0))./2.0-M2.^2.*cos(x3.*2.0)-M2.^2.*cos(x2.*2.0-x3.*2.0)+(M2.^2.*cos(x2.*2.0-x3.*4.0))./2.0+M1.^2.*2.0+M2.^2+M1.*M2.*2.0+M1.*M2.*cos(x2.*2.0).*2.0-M1.*M2.*cos(x3.*2.0).*2.0-M1.*M2.*cos(x2.*2.0-x3.*2.0).*2.0)-(M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*(M1.*cos(x2).*2.0+M2.*cos(x2)-M2.*cos(x2-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2)./L1+(lambda6.*(M1+M2).*(M1.*sin(x2.*3.0-x3).*2.0+M2.*sin(x2.*3.0-x3)-M2.*sin(x2.*3.0-x3.*3.0)-M2.*sin(x2+x3)+M1.*sin(x2-x3).*2.0+M2.*sin(x2-x3)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2)./(L1.*L2.*2.0)+(lambda6.*(M1+M2).*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.*cos(x2.*3.0-x3).*2.0+M2.*cos(x2.*3.0-x3)-M2.*cos(x2.*3.0-x3.*3.0)-M1.*cos(x2+x3).*2.0-M2.*cos(x2+x3).*2.0+M2.*cos(x2-x3)+M2.*cos(x2-x3.*3.0)))./(L1.*L2.*2.0),-(M2.*(g.*m.*cos(x2-x3.*2.0).*2.0+L2.*m.*x6.^2.*cos(x2-x3).*2.0+L1.*m.*x5.^2.*cos(x2.*2.0-x3.*2.0).*2.0-L2.*M1.*x6.^2.*cos(x2+x3)+L2.*M1.*x6.^2.*cos(x2-x3)+(sin(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))))./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+(M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*(M1.*cos(x2).*2.0+M2.*cos(x2)-M2.*cos(x2-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2)./L1+(M2.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.^2.*g.*sin(x2)+M1.*M2.*g.*sin(x2)+M1.*g.*m.*sin(x2)+(M2.*g.*m.*sin(x2))./2.0+(L1.*M1.^2.*x5.^2.*sin(x2.*2.0))./2.0+(M2.*g.*m.*sin(x2-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2-x3))./2.0+L2.*M2.*m.*x6.^2.*sin(x2-x3)+(L1.*M1.*M2.*x5.^2.*sin(x2.*2.0))./2.0+(L1.*M2.*m.*x5.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(L2.*M1.*M2.*x6.^2.*sin(x2+x3))./2.0+(M1.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)+(M2.*cos(x2).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x2-x3.*2.0).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*4.0)./L1-(lambda6.*(M1+M2).*(M1.*sin(x2.*3.0-x3).*2.0+M2.*sin(x2.*3.0-x3)-M2.*sin(x2.*3.0-x3.*3.0)+M1.*sin(x2+x3).*2.0-M2.*sin(x2-x3)+M2.*sin(x2-x3.*3.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2)./(L1.*L2.*4.0)-1.0./L1.^2.*M2.*lambda5.*sin(x2-x3.*2.0).*(M1.*cos(x2).*2.0+M2.*cos(x2)-M2.*cos(x2-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2+1.0./L1.^2.*M2.*lambda5.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.^2.*cos(x2.*2.0).*2.0+(M2.^2.*cos(x2.*2.0))./2.0-M2.^2.*cos(x3.*2.0)-M2.^2.*cos(x2.*2.0-x3.*2.0)+(M2.^2.*cos(x2.*2.0-x3.*4.0))./2.0+M1.^2.*2.0+M2.^2+M1.*M2.*2.0+M1.*M2.*cos(x2.*2.0).*2.0-M1.*M2.*cos(x3.*2.0).*2.0-M1.*M2.*cos(x2.*2.0-x3.*2.0).*2.0)+(M2.*lambda4.*m.*sin(x2.*2.0-x3.*2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M2.^2.*cos(x2-x3.*2.0).*3.0+M2.^2.*cos(x2.*3.0-x3.*2.0)-M2.^2.*cos(x2.*3.0-x3.*4.0)-M1.^2.*cos(x2).*8.0-M2.^2.*cos(x2).*3.0+M1.*M2.*cos(x2-x3.*2.0).*6.0+M1.*M2.*cos(x2.*3.0-x3.*2.0).*2.0-M1.*M2.*cos(x2).*8.0))./(L1.*2.0)-(M2.*lambda6.*m.*sin(x2.*2.0-x3.*2.0).*(M1+M2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.*cos(x2.*3.0-x3).*2.0+M2.*cos(x2.*3.0-x3)-M2.*cos(x2.*3.0-x3.*3.0)-M1.*cos(x2+x3).*2.0-M2.*cos(x2+x3).*2.0+M2.*cos(x2-x3)+M2.*cos(x2-x3.*3.0)))./(L1.*L2.*2.0),0.0,(x5.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*2.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)),(L2.*M2.*x6.*(M1.*sin(x2+x3)+M1.*sin(x2-x3)+m.*sin(x2-x3).*2.0).*2.0)./(L1.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))),0.0,0.0,0.0,((M1+M2).*(M1.*cos(x2.*2.0-x3).*4.0+M2.*cos(x2.*2.0-x3).*3.0+M2.*cos(x2.*2.0-x3.*3.0)-M2.*cos(x2.*4.0-x3.*3.0)-M1.*cos(x3).*4.0-M2.*cos(x3).*3.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(-1.0./4.0))./L2,((M1+M2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.*cos(x2.*3.0-x3).*2.0+M2.*cos(x2.*3.0-x3)-M2.*cos(x2.*3.0-x3.*3.0)-M1.*cos(x2+x3).*2.0-M2.*cos(x2+x3).*2.0+M2.*cos(x2-x3)+M2.*cos(x2-x3.*3.0)))./(L1.*L2.*4.0),1.0./L2.^2.*(M1+M2).^2.*(cos(x2.*2.0).*-2.0+cos(x3.*2.0)-cos(x2.*2.0-x3.*2.0).*2.0+cos(x2.*4.0-x3.*2.0)+2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(-1.0./4.0),0.0,((M1.*g.*m.*cos(x2.*2.0-x3)+M2.*g.*m.*cos(x2.*2.0-x3)+L1.*M1.*m.*x5.^2.*cos(x2-x3)+L1.*M2.*m.*x5.^2.*cos(x2-x3)+L2.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0)-(M1.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)-(M2.*sin(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*2.0)).*-2.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)))+((M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*((M1.*g.*m.*sin(x2.*2.0-x3))./2.0+(M2.*g.*m.*sin(x2.*2.0-x3))./2.0-(M1.*g.*m.*sin(x3))./2.0-(M2.*g.*m.*sin(x3))./2.0+L1.*M1.*m.*x5.^2.*sin(x2-x3)+L1.*M2.*m.*x5.^2.*sin(x2-x3)+(L2.*M2.*m.*x6.^2.*sin(x2.*2.0-x3.*2.0))./2.0+(M1.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)+(M2.*cos(x2.*2.0-x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M1.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)-(M2.*cos(x3).*(L2.*M1.*lambda5.*cos(x2).*2.0+L1.*M1.*lambda6.*cos(x3)+L2.*M2.*lambda5.*cos(x2)+L1.*M2.*lambda6.*cos(x3)-L2.*M2.*lambda5.*cos(x2-x3.*2.0)-L1.*L2.*M1.*lambda4.*2.0-L1.*L2.*M2.*lambda4-L1.*M1.*lambda6.*cos(x2.*2.0-x3)-L1.*M2.*lambda6.*cos(x2.*2.0-x3)+L1.*L2.*M2.*lambda4.*cos(x2.*2.0-x3.*2.0)))./(L1.*L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).*4.0)).*4.0)./L2+(1.0./L2.^2.*lambda6.*(M1+M2).^2.*(sin(x2.*2.0)+sin(x2.*2.0-x3.*2.0)-sin(x2.*4.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2)./2.0-(1.0./L2.^2.*lambda6.*(M1+M2).^2.*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*(cos(x2.*2.0).*-2.0+cos(x3.*2.0)-cos(x2.*2.0-x3.*2.0).*2.0+cos(x2.*4.0-x3.*2.0)+2.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3)./2.0-(lambda5.*(M1+M2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2.*(M1.*sin(x2.*3.0-x3).*-2.0-M2.*sin(x2.*3.0-x3)+M2.*sin(x2.*3.0-x3.*3.0)+M1.*sin(x2+x3).*2.0+M1.*sin(x2-x3).*4.0+M2.*sin(x2-x3)-M2.*sin(x2-x3.*3.0)))./(L1.*L2.*4.0)-(lambda4.*(M1+M2).*(M1.^2.*sin(x2.*2.0).*2.0+M1.*M2.*sin(x2.*2.0).*2.0+M2.*m.*sin(x2.*2.0-x3.*2.0).*2.0).*(M1.*cos(x2.*2.0-x3).*4.0+M2.*cos(x2.*2.0-x3).*3.0+M2.*cos(x2.*2.0-x3.*3.0)-M2.*cos(x2.*4.0-x3.*3.0)-M1.*cos(x3).*4.0-M2.*cos(x3).*3.0).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3)./(L2.*4.0)+(lambda5.*(M1+M2).*(M1.^2.*sin(x2.*2.0)+M1.*M2.*sin(x2.*2.0)+M2.*m.*sin(x2.*2.0-x3.*2.0)).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^3.*(M1.*cos(x2.*3.0-x3).*2.0+M2.*cos(x2.*3.0-x3)-M2.*cos(x2.*3.0-x3.*3.0)-M1.*cos(x2+x3).*2.0-M2.*cos(x2+x3).*2.0+M2.*cos(x2-x3)+M2.*cos(x2-x3.*3.0)))./(L1.*L2.*2.0)+(M2.*lambda4.*sin(x2.*2.0-x3.*2.0).*(cos(x2.*2.0-x3)-cos(x3)).*(M1+M2).*1.0./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0)).^2)./L2,(1.0./L2.^2.*(L1.*M1.^4.*lambda6.*sin(x3.*2.0).*8.0+L1.*M1.^4.*lambda6.*sin(x2.*2.0-x3.*2.0).*1.2e+1-L1.*M1.^4.*lambda6.*sin(x2.*2.0+x3.*2.0).*2.0+L2.*M1.^4.*lambda5.*sin(x2.*3.0-x3).*4.0-L1.*M1.^4.*lambda6.*sin(x2.*4.0-x3.*2.0).*8.0-L2.*M1.^4.*lambda5.*sin(x2.*5.0-x3).*2.0+L1.*M1.^4.*lambda6.*sin(x2.*6.0-x3.*2.0).*2.0+L2.*M1.^4.*lambda5.*sin(x2+x3).*4.0-L2.*M1.^4.*lambda5.*sin(x2.*3.0+x3).*2.0+L1.*L2.*M1.^4.*lambda4.*sin(x2.*2.0+x3).*4.0+L2.*M1.*M2.^3.*lambda5.*sin(x2-x3).*3.0+L2.*M1.^3.*M2.*lambda5.*sin(x2-x3).*3.0+L2.*M1.*M2.^3.*lambda5.*sin(x2-x3.*3.0).*9.0+L2.*M1.*M2.^3.*lambda5.*sin(x2+x3.*3.0).*3.0-L2.*M1.*M2.^3.*lambda5.*sin(x2.*3.0+x3).*2.0+L2.*M1.^3.*M2.*lambda5.*sin(x2-x3.*3.0).*9.0+L2.*M1.^3.*M2.*lambda5.*sin(x2+x3.*3.0).*3.0-L2.*M1.^3.*M2.*lambda5.*sin(x2.*3.0+x3).*6.0+L2.*M1.^2.*M2.^2.*lambda5.*sin(x2+x3).*1.4e+1+L2.*M2.^3.*lambda5.*m.*sin(x2-x3).*1.4e+1+L1.*M1.*M2.^3.*lambda6.*sin(x3.*2.0).*8.0+L1.*M1.^3.*M2.*lambda6.*sin(x3.*2.0).*2.4e+1+L1.*M1.^3.*lambda6.*m.*sin(x3.*2.0).*8.0-L1.*M2.^3.*lambda6.*m.*sin(x3.*2.0).*4.0-L1.*L2.*M1.^4.*lambda4.*sin(x2.*2.0-x3).*1.2e+1+L1.*L2.*M1.^4.*lambda4.*sin(x2.*4.0-x3).*4.0+L1.*M1.*M2.^3.*lambda6.*sin(x2.*2.0-x3.*2.0).*1.2e+1-L1.*M1.*M2.^3.*lambda6.*sin(x2.*2.0+x3.*2.0).*2.0+L1.*M1.^3.*M2.*lambda6.*sin(x2.*2.0-x3.*2.0).*3.6e+1-L1.*M1.^3.*M2.*lambda6.*sin(x2.*2.0+x3.*2.0).*6.0+L2.*M1.*M2.^3.*lambda5.*sin(x2.*3.0-x3)+L2.*M1.^3.*M2.*lambda5.*sin(x2.*3.0-x3).*9.0-L1.*M1.*M2.^3.*lambda6.*sin(x2.*4.0-x3.*2.0).*8.0-L1.*M1.^3.*M2.*lambda6.*sin(x2.*4.0-x3.*2.0).*2.4e+1-L2.*M1.*M2.^3.*lambda5.*sin(x2.*3.0-x3.*3.0).*9.0-L2.*M1.*M2.^3.*lambda5.*sin(x2.*5.0-x3)-L2.*M1.^3.*M2.*lambda5.*sin(x2.*3.0-x3.*3.0).*9.0-L2.*M1.^3.*M2.*lambda5.*sin(x2.*5.0-x3).*5.0+L1.*M1.*M2.^3.*lambda6.*sin(x2.*6.0-x3.*2.0).*2.0+L1.*M1.^3.*M2.*lambda6.*sin(x2.*6.0-x3.*2.0).*6.0+L2.*M1.*M2.^3.*lambda5.*sin(x2.*5.0-x3.*3.0).*3.0+L2.*M1.^3.*M2.*lambda5.*sin(x2.*5.0-x3.*3.0).*3.0+L2.*M1.^2.*M2.^2.*lambda5.*sin(x2-x3).*6.0+L2.*M1.^2.*M2.^2.*lambda5.*sin(x2-x3.*3.0).*1.8e+1+L2.*M1.^2.*M2.^2.*lambda5.*sin(x2+x3.*3.0).*6.0-L2.*M1.^2.*M2.^2.*lambda5.*sin(x2.*3.0+x3).*6.0+L1.*L2.^2.*M2.^3.*m.^3.*x6.^2.*2.4e+1+L1.*M1.^3.*lambda6.*m.*sin(x2.*2.0-x3.*2.0).*1.6e+1+L2.*M1.^3.*lambda5.*m.*sin(x2.*3.0-x3).*8.0-L1.*M2.^3.*lambda6.*m.*sin(x2.*2.0-x3.*2.0).*8.0-L2.*M2.^3.*lambda5.*m.*sin(x2.*3.0-x3).*8.0-L1.*M1.^3.*lambda6.*m.*sin(x2.*4.0-x3.*2.0).*8.0-L1.*M2.^3.*lambda6.*m.*sin(x2.*2.0-x3.*4.0).*2.0+L1.*M2.^3.*lambda6.*m.*sin(x2.*4.0-x3.*2.0).*4.0-L2.*M2.^3.*lambda5.*m.*sin(x2.*3.0-x3.*3.0).*3.0+L1.*M2.^3.*lambda6.*m.*sin(x2.*4.0-x3.*4.0).*4.0+L2.*M2.^3.*lambda5.*m.*sin(x2.*3.0-x3.*5.0)+L2.*M2.^3.*lambda5.*m.*sin(x2.*5.0-x3.*3.0).*3.0-L1.*M2.^3.*lambda6.*m.*sin(x2.*6.0-x3.*4.0).*2.0-L2.*M2.^3.*lambda5.*m.*sin(x2.*5.0-x3.*5.0)+L1.*M1.^2.*M2.^2.*lambda6.*sin(x3.*2.0).*2.4e+1+L2.*M1.*M2.^3.*lambda5.*sin(x2+x3).*5.0+L2.*M1.^3.*M2.*lambda5.*sin(x2+x3).*1.3e+1+L1.*M1.^2.*M2.^2.*lambda6.*sin(x2.*2.0-x3.*2.0).*3.6e+1-L1.*M1.^2.*M2.^2.*lambda6.*sin(x2.*2.0+x3.*2.0).*6.0+L2.*M1.^2.*M2.^2.*lambda5.*sin(x2.*3.0-x3).*6.0-L1.*M1.^2.*M2.^2.*lambda6.*sin(x2.*4.0-x3.*2.0).*2.4e+1-L2.*M1.^2.*M2.^2.*lambda5.*sin(x2.*3.0-x3.*3.0).*1.8e+1-L2.*M1.^2.*M2.^2.*lambda5.*sin(x2.*5.0-x3).*4.0+L1.*M1.^2.*M2.^2.*lambda6.*sin(x2.*6.0-x3.*2.0).*6.0+L2.*M1.^2.*M2.^2.*lambda5.*sin(x2.*5.0-x3.*3.0).*6.0+L2.*M1.^3.*lambda5.*m.*sin(x2+x3).*8.0+L2.*M2.^3.*lambda5.*m.*sin(x2+x3).*6.0-L1.*L2.*M1.^4.*lambda4.*sin(x3).*1.2e+1-L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x3.*3.0).*6.0+L1.^2.*L2.*M1.^4.*m.^2.*x5.^2.*cos(x2.*3.0-x3).*3.2e+1-L1.*L2.^2.*M2.^3.*m.^3.*x6.^2.*cos(x2.*2.0-x3.*2.0).*3.2e+1-L1.^2.*L2.*M2.^3.*m.^3.*x5.^2.*cos(x2.*3.0-x3.*3.0).*1.2e+1+L1.*L2.^2.*M2.^3.*m.^3.*x6.^2.*cos(x2.*4.0-x3.*4.0).*8.0+L1.^2.*L2.*M2.^3.*m.^3.*x5.^2.*cos(x2.*5.0-x3.*5.0).*4.0-L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x2.*2.0-x3).*3.0e+1-L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x2.*2.0-x3.*3.0).*1.8e+1+L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x2.*4.0-x3).*1.0e+1+L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x2.*4.0-x3.*3.0).*1.8e+1-L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x2.*6.0-x3.*3.0).*6.0+L2.*M1.*M2.^2.*lambda5.*m.*sin(x2+x3).*8.0+L2.*M1.^2.*M2.*lambda5.*m.*sin(x2+x3).*1.0e+1-L1.*L2.*M1.*M2.^3.*lambda4.*sin(x3).*9.0-L1.*L2.*M1.^3.*M2.*lambda4.*sin(x3).*3.3e+1-L1.*L2.*M1.^3.*g.*m.^3.*cos(x2.*2.0-x3).*3.2e+1-L1.*L2.*M1.^4.*g.*m.^2.*cos(x2.*2.0-x3).*1.6e+1+L1.*L2.*M2.^3.*g.*m.^3.*cos(x2.*2.0-x3).*4.0+L1.*L2.*M1.^4.*g.*m.^2.*cos(x2.*4.0-x3).*1.6e+1-L1.*L2.*M2.^3.*g.*m.^3.*cos(x2.*2.0-x3.*3.0).*6.0-L1.*L2.*M2.^3.*g.*m.^3.*cos(x2.*4.0-x3.*3.0).*6.0+L1.*L2.*M2.^3.*g.*m.^3.*cos(x2.*4.0-x3.*5.0).*2.0+L1.*L2.*M2.^3.*g.*m.^3.*cos(x2.*6.0-x3.*5.0).*2.0-L1.*L2.*M1.^5.*g.*m.*cos(x3).*4.0+L1.*L2.^2.*M1.^2.*M2.^2.*m.^2.*x6.^2.*2.4e+1-L1.^2.*L2.*M1.^5.*m.*x5.^2.*cos(x2-x3).*2.4e+1-L1.^2.*L2.*M1.^5.*m.*x5.^2.*cos(x2.*3.0+x3).*4.0+L1.^2.*L2.*M1.^4.*m.^2.*x5.^2.*cos(x2+x3).*3.2e+1-L1.*L2.*M1.^3.*lambda4.*m.*sin(x3).*1.6e+1+L1.*L2.*M2.^3.*lambda4.*m.*sin(x3).*2.0+L1.*L2.*M1.*M2.^3.*lambda4.*sin(x2.*2.0+x3).*3.0+L1.*L2.*M1.^3.*M2.*lambda4.*sin(x2.*2.0+x3).*1.1e+1+L1.*L2.*M1.^5.*g.*m.*cos(x2.*2.0+x3).*6.0-L1.*L2.*M1.^5.*g.*m.*cos(x2.*4.0+x3).*2.0+L2.*M1.*M2.^2.*lambda5.*m.*sin(x2-x3).*1.8e+1+L2.*M1.^2.*M2.*lambda5.*m.*sin(x2-x3).*4.0+L2.*M1.*M2.^2.*lambda5.*m.*sin(x2-x3.*3.0).*6.0+L2.*M1.^2.*M2.*lambda5.*m.*sin(x2-x3.*3.0).*6.0-L1.*L2.*M1.*M2.^3.*lambda4.*sin(x3.*3.0).*3.0-L1.*L2.*M1.^3.*M2.*lambda4.*sin(x3.*3.0).*3.0-L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x3).*3.0e+1-L1.*L2.*M1.^3.*g.*m.^3.*cos(x3).*3.2e+1-L1.*L2.*M1.^4.*g.*m.^2.*cos(x3).*1.6e+1+L1.*L2.*M2.^3.*g.*m.^3.*cos(x3).*4.0+L1.^2.*L2.*M1.^5.*m.*x5.^2.*cos(x2.*3.0-x3).*1.6e+1-L1.^2.*L2.*M1.^5.*m.*x5.^2.*cos(x2.*5.0-x3).*4.0-L1.^2.*L2.*M1.^3.*m.^3.*x5.^2.*cos(x2-x3).*6.4e+1-L1.^2.*L2.*M1.^4.*m.^2.*x5.^2.*cos(x2-x3).*6.4e+1+L1.^2.*L2.*M2.^3.*m.^3.*x5.^2.*cos(x2-x3).*8.0+L1.*M1.^2.*M2.*lambda6.*m.*sin(x3.*2.0).*1.2e+1-L1.*L2.*M1.*M2.^3.*lambda4.*sin(x2.*2.0-x3).*9.0-L1.*L2.*M1.^3.*M2.*lambda4.*sin(x2.*2.0-x3).*3.3e+1-L1.*L2.*M1.*M2.^3.*lambda4.*sin(x2.*2.0-x3.*3.0).*9.0+L1.*L2.*M1.*M2.^3.*lambda4.*sin(x2.*4.0-x3).*3.0-L1.*L2.*M1.^3.*M2.*lambda4.*sin(x2.*2.0-x3.*3.0).*9.0+L1.*L2.*M1.^3.*M2.*lambda4.*sin(x2.*4.0-x3).*1.1e+1+L1.*L2.*M1.*M2.^3.*lambda4.*sin(x2.*4.0-x3.*3.0).*9.0+L1.*L2.*M1.^3.*M2.*lambda4.*sin(x2.*4.0-x3.*3.0).*9.0-L1.*L2.*M1.*M2.^3.*lambda4.*sin(x2.*6.0-x3.*3.0).*3.0-L1.*L2.*M1.^3.*M2.*lambda4.*sin(x2.*6.0-x3.*3.0).*3.0+L1.*L2.*M1.^2.*M2.^2.*lambda4.*sin(x2.*2.0+x3).*1.0e+1-L1.*L2.*M1.^5.*g.*m.*cos(x2.*2.0-x3).*4.0+L1.*L2.*M1.^5.*g.*m.*cos(x2.*4.0-x3).*6.0-L1.*L2.*M1.^5.*g.*m.*cos(x2.*6.0-x3).*2.0+L1.*L2.*M1.^4.*g.*m.^2.*cos(x2.*2.0+x3).*1.6e+1+L1.*L2.^2.*M1.*M2.^2.*m.^3.*x6.^2.*4.8e+1+L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*2.4e+1+L1.^2.*L2.*M1.^5.*m.*x5.^2.*cos(x2+x3).*1.6e+1-L1.*L2.*M1.^3.*lambda4.*m.*sin(x2.*2.0-x3).*1.6e+1+L1.*L2.*M2.^3.*lambda4.*m.*sin(x2.*2.0-x3).*2.0+L1.*L2.*M2.^3.*lambda4.*m.*sin(x2.*2.0-x3.*3.0).*3.0-L1.*L2.*M2.^3.*lambda4.*m.*sin(x2.*4.0-x3.*3.0).*3.0-L1.*L2.*M2.^3.*lambda4.*m.*sin(x2.*4.0-x3.*5.0)+L1.*L2.*M2.^3.*lambda4.*m.*sin(x2.*6.0-x3.*5.0)+L1.*M1.^2.*M2.*lambda6.*m.*sin(x2.*2.0-x3.*2.0).*2.4e+1-L2.*M1.*M2.^2.*lambda5.*m.*sin(x2.*3.0-x3).*1.0e+1+L2.*M1.^2.*M2.*lambda5.*m.*sin(x2.*3.0-x3).*6.0-L1.*M1.*M2.^2.*lambda6.*m.*sin(x2.*2.0-x3.*4.0).*4.0-L1.*M1.^2.*M2.*lambda6.*m.*sin(x2.*2.0-x3.*4.0).*2.0-L1.*M1.^2.*M2.*lambda6.*m.*sin(x2.*4.0-x3.*2.0).*1.2e+1-L2.*M1.*M2.^2.*lambda5.*m.*sin(x2.*3.0-x3.*3.0).*1.5e+1-L2.*M1.^2.*M2.*lambda5.*m.*sin(x2.*3.0-x3.*3.0).*1.2e+1+L1.*M1.*M2.^2.*lambda6.*m.*sin(x2.*4.0-x3.*4.0).*8.0+L1.*M1.^2.*M2.*lambda6.*m.*sin(x2.*4.0-x3.*4.0).*4.0+L2.*M1.*M2.^2.*lambda5.*m.*sin(x2.*3.0-x3.*5.0)+L2.*M1.*M2.^2.*lambda5.*m.*sin(x2.*5.0-x3.*3.0).*9.0+L2.*M1.^2.*M2.*lambda5.*m.*sin(x2.*5.0-x3.*3.0).*6.0-L1.*M1.*M2.^2.*lambda6.*m.*sin(x2.*6.0-x3.*4.0).*4.0-L1.*M1.^2.*M2.*lambda6.*m.*sin(x2.*6.0-x3.*4.0).*2.0-L2.*M1.*M2.^2.*lambda5.*m.*sin(x2.*5.0-x3.*5.0)+L1.^2.*L2.*M1.^4.*M2.*m.*x5.^2.*cos(x2.*3.0-x3).*4.8e+1-L1.*L2.^2.*M1.^4.*M2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0).*2.4e+1-L1.*L2.^2.*M1.^4.*M2.*m.*x6.^2.*cos(x2.*2.0+x3.*2.0).*4.0-L1.^2.*L2.*M1.^4.*M2.*m.*x5.^2.*cos(x2.*5.0-x3).*1.2e+1+L1.*L2.^2.*M1.^4.*M2.*m.*x6.^2.*cos(x2.*4.0-x3.*2.0).*1.6e+1-L1.*L2.^2.*M1.^4.*M2.*m.*x6.^2.*cos(x2.*6.0-x3.*2.0).*4.0+L1.^2.*L2.*M1.*M2.^2.*m.^3.*x5.^2.*cos(x2-x3).*8.0-L1.^2.*L2.*M1.^2.*M2.*m.^3.*x5.^2.*cos(x2-x3).*6.4e+1-L1.^2.*L2.*M1.^2.*M2.^3.*m.*x5.^2.*cos(x2-x3).*2.4e+1-L1.^2.*L2.*M1.^3.*M2.*m.^2.*x5.^2.*cos(x2-x3).*1.28e+2-L1.^2.*L2.*M1.^3.*M2.^2.*m.*x5.^2.*cos(x2-x3).*7.2e+1-L1.^2.*L2.*M1.^2.*M2.^3.*m.*x5.^2.*cos(x2.*3.0+x3).*4.0-L1.^2.*L2.*M1.^3.*M2.^2.*m.*x5.^2.*cos(x2.*3.0+x3).*1.2e+1+L1.^2.*L2.*M1.^2.*M2.^2.*m.^2.*x5.^2.*cos(x2+x3).*3.2e+1-L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x2.*2.0).*2.4e+1+L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x3.*2.0).*1.6e+1+L1.*L2.^2.*M1.^2.*M2.^3.*m.*x6.^2.*cos(x3.*2.0).*1.6e+1+L1.*L2.^2.*M1.^3.*M2.*m.^2.*x6.^2.*cos(x3.*2.0).*3.2e+1+L1.*L2.^2.*M1.^3.*M2.^2.*m.*x6.^2.*cos(x3.*2.0).*3.2e+1-L1.*L2.*M1.^4.*M2.*g.*m.*cos(x2.*2.0-x3).*1.2e+1+L1.*L2.*M1.^4.*M2.*g.*m.*cos(x2.*4.0-x3).*1.8e+1-L1.*L2.*M1.^4.*M2.*g.*m.*cos(x2.*6.0-x3).*6.0+L1.*L2.*M1.^2.*M2.^3.*g.*m.*cos(x2.*2.0+x3).*6.0+L1.*L2.*M1.^3.*M2.*g.*m.^2.*cos(x2.*2.0+x3).*3.2e+1+L1.*L2.*M1.^3.*M2.^2.*g.*m.*cos(x2.*2.0+x3).*1.8e+1-L1.*L2.*M1.^2.*M2.^3.*g.*m.*cos(x2.*4.0+x3).*2.0-L1.*L2.*M1.^3.*M2.^2.*g.*m.*cos(x2.*4.0+x3).*6.0+L1.^2.*L2.*M1.^4.*M2.*m.*x5.^2.*cos(x2+x3).*4.8e+1+L1.*L2.*M1.*M2.^2.*lambda4.*m.*sin(x2.*2.0-x3).*2.0-L1.*L2.*M1.^2.*M2.*lambda4.*m.*sin(x2.*2.0-x3).*1.6e+1+L1.*L2.*M1.*M2.^2.*lambda4.*m.*sin(x2.*2.0-x3.*3.0).*3.0-L1.*L2.*M1.*M2.^2.*lambda4.*m.*sin(x2.*4.0-x3.*3.0).*3.0-L1.*L2.*M1.*M2.^2.*lambda4.*m.*sin(x2.*4.0-x3.*5.0)+L1.*L2.*M1.*M2.^2.*lambda4.*m.*sin(x2.*6.0-x3.*5.0)-L1.*L2.*M1.^2.*M2.^2.*g.*m.^2.*cos(x3).*1.6e+1+L1.^2.*L2.*M1.^2.*M2.^3.*m.*x5.^2.*cos(x2.*3.0-x3).*1.6e+1+L1.^2.*L2.*M1.^3.*M2.*m.^2.*x5.^2.*cos(x2.*3.0-x3).*6.4e+1+L1.^2.*L2.*M1.^3.*M2.^2.*m.*x5.^2.*cos(x2.*3.0-x3).*4.8e+1-L1.*L2.^2.*M1.*M2.^2.*m.^3.*x6.^2.*cos(x2.*2.0-x3.*2.0).*6.4e+1-L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x2.*2.0-x3.*2.0).*3.2e+1-L1.*L2.^2.*M1.^2.*M2.*m.^3.*x6.^2.*cos(x2.*2.0-x3.*2.0).*6.4e+1-L1.*L2.^2.*M1.^2.*M2.^3.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0).*2.4e+1-L1.*L2.^2.*M1.^2.*M2.^3.*m.*x6.^2.*cos(x2.*2.0+x3.*2.0).*4.0-L1.*L2.^2.*M1.^3.*M2.*m.^2.*x6.^2.*cos(x2.*2.0-x3.*2.0).*6.4e+1-L1.*L2.^2.*M1.^3.*M2.^2.*m.*x6.^2.*cos(x2.*2.0-x3.*2.0).*4.8e+1-L1.*L2.^2.*M1.^3.*M2.^2.*m.*x6.^2.*cos(x2.*2.0+x3.*2.0).*8.0-L1.^2.*L2.*M1.*M2.^2.*m.^3.*x5.^2.*cos(x2.*3.0-x3.*3.0).*1.2e+1-L1.^2.*L2.*M1.^2.*M2.^3.*m.*x5.^2.*cos(x2.*5.0-x3).*4.0-L1.^2.*L2.*M1.^3.*M2.^2.*m.*x5.^2.*cos(x2.*5.0-x3).*1.2e+1-L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x2.*2.0-x3.*4.0).*4.0+L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x2.*4.0-x3.*2.0).*1.6e+1+L1.*L2.^2.*M1.^2.*M2.^3.*m.*x6.^2.*cos(x2.*4.0-x3.*2.0).*1.6e+1+L1.*L2.^2.*M1.^3.*M2.*m.^2.*x6.^2.*cos(x2.*4.0-x3.*2.0).*3.2e+1+L1.*L2.^2.*M1.^3.*M2.^2.*m.*x6.^2.*cos(x2.*4.0-x3.*2.0).*3.2e+1+L1.*L2.^2.*M1.*M2.^2.*m.^3.*x6.^2.*cos(x2.*4.0-x3.*4.0).*1.6e+1+L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x2.*4.0-x3.*4.0).*8.0-L1.*L2.^2.*M1.^2.*M2.^3.*m.*x6.^2.*cos(x2.*6.0-x3.*2.0).*4.0-L1.*L2.^2.*M1.^3.*M2.^2.*m.*x6.^2.*cos(x2.*6.0-x3.*2.0).*8.0+L1.^2.*L2.*M1.*M2.^2.*m.^3.*x5.^2.*cos(x2.*5.0-x3.*5.0).*4.0-L1.*L2.^2.*M1.*M2.^3.*m.^2.*x6.^2.*cos(x2.*6.0-x3.*4.0).*4.0-L1.^2.*L2.*M1.^2.*M2.^2.*m.^2.*x5.^2.*cos(x2-x3).*6.4e+1-L1.*L2.^2.*M1.^2.*M2.^2.*m.^2.*x6.^2.*cos(x2.*2.0).*2.4e+1+L1.*L2.^2.*M1.^2.*M2.^2.*m.^2.*x6.^2.*cos(x3.*2.0).*4.8e+1+L1.*L2.*M1.*M2.^2.*g.*m.^3.*cos(x2.*2.0-x3).*4.0-L1.*L2.*M1.^2.*M2.*g.*m.^3.*cos(x2.*2.0-x3).*3.2e+1-L1.*L2.*M1.^2.*M2.^3.*g.*m.*cos(x2.*2.0-x3).*4.0-L1.*L2.*M1.^3.*M2.*g.*m.^2.*cos(x2.*2.0-x3).*3.2e+1-L1.*L2.*M1.^3.*M2.^2.*g.*m.*cos(x2.*2.0-x3).*1.2e+1-L1.*L2.*M1.*M2.^2.*g.*m.^3.*cos(x2.*2.0-x3.*3.0).*6.0+L1.*L2.*M1.^2.*M2.^3.*g.*m.*cos(x2.*4.0-x3).*6.0+L1.*L2.*M1.^3.*M2.*g.*m.^2.*cos(x2.*4.0-x3).*3.2e+1+L1.*L2.*M1.^3.*M2.^2.*g.*m.*cos(x2.*4.0-x3).*1.8e+1-L1.*L2.*M1.*M2.^2.*g.*m.^3.*cos(x2.*4.0-x3.*3.0).*6.0-L1.*L2.*M1.^2.*M2.^3.*g.*m.*cos(x2.*6.0-x3).*2.0-L1.*L2.*M1.^3.*M2.^2.*g.*m.*cos(x2.*6.0-x3).*6.0+L1.*L2.*M1.*M2.^2.*g.*m.^3.*cos(x2.*4.0-x3.*5.0).*2.0+L1.*L2.*M1.*M2.^2.*g.*m.^3.*cos(x2.*6.0-x3.*5.0).*2.0+L1.*L2.*M1.^2.*M2.^2.*g.*m.^2.*cos(x2.*2.0+x3).*1.6e+1-L1.*L2.*M1.^4.*M2.*g.*m.*cos(x3).*1.2e+1-L1.^2.*L2.*M1.^4.*M2.*m.*x5.^2.*cos(x2-x3).*7.2e+1-L1.^2.*L2.*M1.^4.*M2.*m.*x5.^2.*cos(x2.*3.0+x3).*1.2e+1+L1.^2.*L2.*M1.^2.*M2.^3.*m.*x5.^2.*cos(x2+x3).*1.6e+1+L1.^2.*L2.*M1.^3.*M2.*m.^2.*x5.^2.*cos(x2+x3).*6.4e+1+L1.^2.*L2.*M1.^3.*M2.^2.*m.*x5.^2.*cos(x2+x3).*4.8e+1+L1.*L2.*M1.*M2.^2.*lambda4.*m.*sin(x3).*2.0-L1.*L2.*M1.^2.*M2.*lambda4.*m.*sin(x3).*1.6e+1+L1.^2.*L2.*M1.^2.*M2.^2.*m.^2.*x5.^2.*cos(x2.*3.0-x3).*3.2e+1-L1.*L2.^2.*M1.^2.*M2.^2.*m.^2.*x6.^2.*cos(x2.*2.0-x3.*2.0).*9.6e+1-L1.*L2.^2.*M1.^2.*M2.^2.*m.^2.*x6.^2.*cos(x2.*2.0-x3.*4.0).*4.0+L1.*L2.^2.*M1.^2.*M2.^2.*m.^2.*x6.^2.*cos(x2.*4.0-x3.*2.0).*4.8e+1+L1.*L2.^2.*M1.^2.*M2.^2.*m.^2.*x6.^2.*cos(x2.*4.0-x3.*4.0).*8.0-L1.*L2.^2.*M1.^2.*M2.^2.*m.^2.*x6.^2.*cos(x2.*6.0-x3.*4.0).*4.0+L1.*L2.^2.*M1.^4.*M2.*m.*x6.^2.*cos(x3.*2.0).*1.6e+1+L1.*L2.*M1.^4.*M2.*g.*m.*cos(x2.*2.0+x3).*1.8e+1-L1.*L2.*M1.^4.*M2.*g.*m.*cos(x2.*4.0+x3).*6.0-L1.*L2.*M1.^2.*M2.^2.*g.*m.^2.*cos(x2.*2.0-x3).*1.6e+1+L1.*L2.*M1.^2.*M2.^2.*g.*m.^2.*cos(x2.*4.0-x3).*1.6e+1+L1.*L2.*M1.*M2.^2.*g.*m.^3.*cos(x3).*4.0-L1.*L2.*M1.^2.*M2.*g.*m.^3.*cos(x3).*3.2e+1-L1.*L2.*M1.^2.*M2.^3.*g.*m.*cos(x3).*4.0-L1.*L2.*M1.^3.*M2.*g.*m.^2.*cos(x3).*3.2e+1-L1.*L2.*M1.^3.*M2.^2.*g.*m.*cos(x3).*1.2e+1).*(-1.0./2.0))./(L1.*(M1.^6.*cos(x2.*2.0).*-1.5e+1+M1.^6.*cos(x2.*4.0).*6.0-M1.^6.*cos(x2.*6.0)+M1.^5.*M2.*3.0e+1+M1.^5.*m.*3.6e+1+M1.^6.*1.0e+1+M1.^3.*M2.^3.*1.0e+1+M1.^4.*M2.^2.*3.0e+1+M1.^3.*m.^3.*3.2e+1+M1.^4.*m.^2.*4.8e+1+M2.^3.*m.^3.*1.0e+1-M1.^4.*m.^2.*cos(x2.*2.0).*4.8e+1+M1.*M2.^2.*m.^3.*3.6e+1+M1.*M2.^3.*m.^2.*1.8e+1+M1.^2.*M2.*m.^3.*4.8e+1+M1.^2.*M2.^3.*m.*1.8e+1+M1.^3.*M2.*m.^2.*9.6e+1+M1.^3.*M2.^2.*m.*7.2e+1-M2.^3.*m.^3.*cos(x2.*2.0-x3.*2.0).*1.5e+1+M2.^3.*m.^3.*cos(x2.*4.0-x3.*4.0).*6.0-M2.^3.*m.^3.*cos(x2.*6.0-x3.*6.0)+M1.^2.*M2.^2.*m.^2.*6.6e+1-M1.^5.*M2.*cos(x2.*2.0).*4.5e+1+M1.^5.*M2.*cos(x2.*4.0).*1.8e+1-M1.^5.*M2.*cos(x2.*6.0).*3.0-M1.^5.*m.*cos(x2.*2.0).*4.8e+1+M1.^5.*m.*cos(x2.*4.0).*1.2e+1+M1.^4.*M2.*m.*9.0e+1-M1.^3.*M2.^3.*cos(x2.*2.0).*1.5e+1-M1.^4.*M2.^2.*cos(x2.*2.0).*4.5e+1+M1.^3.*M2.^3.*cos(x2.*4.0).*6.0+M1.^4.*M2.^2.*cos(x2.*4.0).*1.8e+1-M1.^3.*M2.^3.*cos(x2.*6.0)-M1.^4.*M2.^2.*cos(x2.*6.0).*3.0-M1.^4.*M2.*m.*cos(x2.*2.0).*1.2e+2+M1.^4.*M2.*m.*cos(x3.*2.0).*1.2e+1+M1.^4.*M2.*m.*cos(x2.*4.0).*3.0e+1-M1.^4.*M2.*m.*cos(x2.*2.0-x3.*2.0).*1.8e+1-M1.^4.*M2.*m.*cos(x2.*2.0+x3.*2.0).*3.0+M1.^4.*M2.*m.*cos(x2.*4.0-x3.*2.0).*1.2e+1-M1.^4.*M2.*m.*cos(x2.*6.0-x3.*2.0).*3.0-M1.*M2.^3.*m.^2.*cos(x2.*2.0).*1.8e+1-M1.^2.*M2.^3.*m.*cos(x2.*2.0).*2.4e+1-M1.^3.*M2.*m.^2.*cos(x2.*2.0).*9.6e+1-M1.^3.*M2.^2.*m.*cos(x2.*2.0).*9.6e+1+M1.*M2.^3.*m.^2.*cos(x3.*2.0).*1.2e+1+M1.^2.*M2.^3.*m.*cos(x3.*2.0).*1.2e+1+M1.^3.*M2.*m.^2.*cos(x3.*2.0).*2.4e+1+M1.^3.*M2.^2.*m.*cos(x3.*2.0).*2.4e+1+M1.^2.*M2.^3.*m.*cos(x2.*4.0).*6.0+M1.^3.*M2.^2.*m.*cos(x2.*4.0).*2.4e+1-M1.*M2.^2.*m.^3.*cos(x2.*2.0-x3.*2.0).*4.8e+1-M1.*M2.^3.*m.^2.*cos(x2.*2.0-x3.*2.0).*2.4e+1-M1.^2.*M2.*m.^3.*cos(x2.*2.0-x3.*2.0).*4.8e+1-M1.^2.*M2.^3.*m.*cos(x2.*2.0-x3.*2.0).*1.8e+1-M1.^2.*M2.^3.*m.*cos(x2.*2.0+x3.*2.0).*3.0-M1.^3.*M2.*m.^2.*cos(x2.*2.0-x3.*2.0).*4.8e+1-M1.^3.*M2.^2.*m.*cos(x2.*2.0-x3.*2.0).*3.6e+1-M1.^3.*M2.^2.*m.*cos(x2.*2.0+x3.*2.0).*6.0-M1.*M2.^3.*m.^2.*cos(x2.*2.0-x3.*4.0).*3.0+M1.*M2.^3.*m.^2.*cos(x2.*4.0-x3.*2.0).*1.2e+1+M1.^2.*M2.^3.*m.*cos(x2.*4.0-x3.*2.0).*1.2e+1+M1.^3.*M2.*m.^2.*cos(x2.*4.0-x3.*2.0).*2.4e+1+M1.^3.*M2.^2.*m.*cos(x2.*4.0-x3.*2.0).*2.4e+1+M1.*M2.^2.*m.^3.*cos(x2.*4.0-x3.*4.0).*1.2e+1+M1.*M2.^3.*m.^2.*cos(x2.*4.0-x3.*4.0).*6.0-M1.^2.*M2.^3.*m.*cos(x2.*6.0-x3.*2.0).*3.0-M1.^3.*M2.^2.*m.*cos(x2.*6.0-x3.*2.0).*6.0-M1.*M2.^3.*m.^2.*cos(x2.*6.0-x3.*4.0).*3.0-M1.^2.*M2.^2.*m.^2.*cos(x2.*2.0).*6.6e+1+M1.^2.*M2.^2.*m.^2.*cos(x3.*2.0).*3.6e+1-M1.^2.*M2.^2.*m.^2.*cos(x2.*2.0-x3.*2.0).*7.2e+1-M1.^2.*M2.^2.*m.^2.*cos(x2.*2.0-x3.*4.0).*3.0+M1.^2.*M2.^2.*m.^2.*cos(x2.*4.0-x3.*2.0).*3.6e+1+M1.^2.*M2.^2.*m.^2.*cos(x2.*4.0-x3.*4.0).*6.0-M1.^2.*M2.^2.*m.^2.*cos(x2.*6.0-x3.*4.0).*3.0)),0.0,(L1.*m.*x5.*sin(x2-x3).*(M1+M2).*-4.0)./(L2.*(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))),(M2.*m.*x6.*sin(x2.*2.0-x3.*2.0).*-2.0)./(M1.*m.*2.0+M2.*m-M1.^2.*cos(x2.*2.0)+M1.^2+M1.*M2-M1.*M2.*cos(x2.*2.0)-M2.*m.*cos(x2.*2.0-x3.*2.0))],[12,12]);
end

% Computes the stm derivative (as a 12x12 matrix)
function stmdot = Fstm(stm, y, L1, L2, M1, M2, m, g)
    stmdot = dFdy(y, L1, L2, M1, M2, m, g) * stm;
end

% Propagates the full 156 element combined vector of x, lambda, and the stm
function yaugdot = Faug(yaug, L1, L2, M1, M2, m, g)
    y = yaug(1:12);
    stmvec = yaug(13:156);
    stm = reshape(stmvec, [12 12]);

    ydot = F(y, L1, L2, M1, M2, m, g);
    stmdot = Fstm(stm, y, L1, L2, M1, M2, m, g);
    stmdotvec = reshape(stmdot, [144 1]);

    yaugdot = [ydot; stmdotvec];
end

% Numerically integrates the state x and the costate lambda for a certain
% time span tspan and returns the final states and the state transition
% matrix (stm), the analytical derivatives
function [x, lambda, stm, xhistory, lambdahistory] = flow(x0, lambda0, tspan, L1, L2, M1, M2, m, g)
    y0 = [x0; lambda0];
    stm0 = eye(12);

    yaug0 = [y0; reshape(stm0, [144 1])];

    % Pretty lax integration tolerances, having them this low saves time
    % and is sufficient
    odeoptions = odeset(RelTol = 1e-6, AbsTol = 1e-6, MinStep=1e-8);
    [~, yaug] = ode113(@(t, yaug) Faug(yaug, L1, L2, M1, M2, m, g), tspan, yaug0, odeoptions);

    x = yaug(end, 1:6)';
    lambda = yaug(end, 7:12)';
    stmvec = yaug(end, 13:156)';
    stm = reshape(stmvec, [12 12]);

    xhistory = yaug(:, 1:6);
    lambdahistory = yaug(:, 7:12);
end

% Same as flow but without propagating the state transition matrix. Useful
% for analysing solutions.
function [x, lambda, xhistory, lambdahistory] = flowy(x0, lambda0, tspan, L1, L2, M1, M2, m, g)
    y0 = [x0; lambda0];

    % Pretty lax integration tolerances, having them this low saves time
    % and is sufficient
    odeoptions = odeset(RelTol = 1e-6, AbsTol = 1e-6, MinStep=1e-8);
    [~, y] = ode113(@(t, y) F(y, L1, L2, M1, M2, m, g), tspan, y0, odeoptions);

    x = y(end, 1:6)';
    lambda = y(end, 7:12)';
    xhistory = y(:, 1:6);
    lambdahistory = y(:, 7:12);
end

% This function returns the multiple shooting defects and the analytical
% gradients. It is used by fsolve to solve the optimization problem. Note
% how the inputs and outputs are scaled (normalized) to improve
% convergence. The decision vector consists of
% z = [lambda0, x1, lambda1, x2, lambda2, ..., xn-1, lambdan-1]'
% The output is (phi() is the flow)
% phizerr = [phi(x0, lambda0) - [x1; lambda1];
%            phi(x1, lambda1) - [x2; lambda2];
%            ...
%            phi(xn-2, lambdan-2) - [xn-1, lambdan-1];
%            phi(xn-1, lambdan-1)(1:6) - xf];
% In the last row the flow results of lambda are omitted because there are
% no constraints on the final lambda.
function [phiznormerr, stmnorm] = multshootf(znorm, x0, xf, xmax, lambdamax, n, tspan, L1, L2, M1, M2, m, g)
    % The output vector phiz
    phiznormerr = zeros(n*12 - 6, 1);

    % The gradient vector
    stmnorm = zeros(n*12 - 6, n*12 - 6);

    % znorm and phiznormerr are normalized with xmax and lambdamax for
    % better convergence

    % Propagate each segment
    for i = 1:n
        % Get elements from z vector
        if i == 1
            xi = x0;
            lambdai = znorm(1:6) .* lambdamax;
        else
            xi = znorm((i-1)*12 - 5 : (i-1)*12) .* xmax;
            lambdai = znorm((i-1)*12 + 1 : (i-1)*12 + 6) .* lambdamax;
        end

        ti0 = tspan(i);
        tif = tspan(i+1);

        % Propagate
        [phixi, philambdai, stmi, ~, ~] = flow(xi, lambdai, [ti0 tif], L1, L2, M1, M2, m, g);

        % Normalize stm
        stminorm = stmi;
        stminorm(1:6, 1:6) = stminorm(1:6, 1:6) ./ xmax .* xmax';
        stminorm(1:6, 7:12) = stminorm(1:6, 7:12) ./ xmax .* lambdamax';  % dx/dlambda
        stminorm(7:12, 1:6) = stminorm(7:12, 1:6) ./ lambdamax .* xmax';  % dlambda/dx
        stminorm(7:12, 7:12) = stminorm(7:12, 7:12) ./ lambdamax .* lambdamax';

        % Write differences into final vector
        if i == n
            phiznormerr((n-1)*12 + 1 : (n-1)*12 + 6) = (phixi - xf) ./ xmax;
        else
            xip1 = znorm((i)*12 - 5 : (i)*12) .* xmax;
            lambdaip1 = znorm((i)*12 + 1 : (i)*12 + 6) .* lambdamax;

            phiznormerr((i-1)*12 + 1 : (i-1)*12 + 6) = (phixi - xip1) ./ xmax;
            phiznormerr((i-1)*12 + 7 : (i-1)*12 + 12) = (philambdai - lambdaip1) ./ lambdamax;
        end

        % Write stm matrix
        if i == 1
            stmnorm(1:6, 1:6) = stminorm(1:6, 7:12);
            stmnorm(7:12, 1:6) = stminorm(7:12, 7:12);

            stmnorm(1:6, 7:12) = -eye(6);
            stmnorm(7:12, 13:18) = -eye(6);
        elseif i == n
            stmnorm((n-1)*12 + 1 : (n-1)*12 + 6, (i-1)*12 - 5 : (i-1)*12) = stminorm(1:6, 1:6);
            stmnorm((n-1)*12 + 1 : (n-1)*12 + 6, (i-1)*12 + 1 : (i-1)*12 + 6) = stminorm(1:6, 7:12);
        else
            stmnorm((i-1)*12 + 1 : (i-1)*12 + 12, (i-1)*12 - 5 : (i-1)*12 + 6) = stminorm;

            stmnorm((i-1)*12 + 1 : (i-1)*12 + 6, (i)*12 - 5 : (i)*12) = -eye(6);
            stmnorm((i-1)*12 + 7 : (i-1)*12 + 12, (i)*12 + 1 : (i)*12 + 6) = -eye(6);
        end
    end
end

% This function solves for lambda0 using multiple shooting
function [lambda0, converged] = multshoot(x0, xf, lambda0guess, xmax, lambdamax, tspan, L1, L2, M1, M2, m, g)
    try  % Just to be sure

        % Integrate once with lambda0guess to get guesses for the shooting
        % points. This will be the starting state for multiple shooting.
        [~, ~, initxhistory, initlambdahistory] = flowy(x0, lambda0guess, tspan, L1, L2, M1, M2, m, g);
    
        % Number of integration elements
        n = length(tspan) - 1;
    
        % Extract the states at the segment points and initialize the
        % multiple shooting state with them
        znorm0 = zeros(12*n - 6, 1);
        for i = 1:n
            if i == 1
                znorm0(1:6) = lambda0guess ./ lambdamax;
            else
                znorm0((i-1)*12 - 5 : (i-1)*12) = initxhistory(i, :)' ./ xmax;
                znorm0((i-1)*12 + 1 : (i-1)*12 + 6) = initlambdahistory(i, :)' ./ lambdamax;
            end
        end

        % This additional setting may be used in addition but the solver
        % output was deemed useful:
        %'Display', 'off', ...
        soloptions = optimoptions('fsolve', ...
            'Algorithm', 'trust-region-dogleg', ...  % fsolve's standard
            'MaxFunctionEvaluations', 2000, ...      % Good guesses should converge before this
            'MaxIterations', 2000, ...
            'FunctionTolerance', 1e-3, ...           % This is sufficient even after assembling all the shooting segments
            'SpecifyObjectiveGradient', true);       % Analytical gradients are being supplied to fsolve
        % Use matlab's fsolve to get the boundary constraints to zero
        [znorm, ~, exitflag, ~] = fsolve(@(znorm) multshootf(znorm, x0, xf, xmax, lambdamax, n, tspan, L1, L2, M1, M2, m, g), znorm0, soloptions);
    
    catch
        exitflag = -10;
        disp("Error: Something went wrong in fsolve.")
    end
    
    converged = false;
    lambda0 = [0; 0; 0; 0; 0; 0];
    if exitflag > 0  % If the fsolve converged
        converged = true;
    end
    if exitflag > -10  % If fsolve finished (doesn't matter if it converged)
        lambda0 = znorm(1:6) .* lambdamax;  % Output the results (lambda0 are the first 6 elements of the opt vector)
    end
end

% Not usually used, only for visualization
function animate(x, frames, dt, L1, L2, M1, M2, m, g)
    figure();
    
    % Draw pendulum
    rm = [x(1, 1); 0];
    rM1 = rm + L1 * [sin(x(1, 2)); -cos(x(1, 2))];
    rM2 = rM1 + L2 * [sin(x(1, 3)); -cos(x(1, 3))];
    arm1 = plot([rm(1), rM1(1)], [rm(2), rM1(2)], 'k-', 'LineWidth', 1);
    hold on
    arm2 = plot([rM1(1), rM2(1)], [rM1(2), rM2(2)], 'k-', 'LineWidth', 1);
    sled = plot(rm(1), rm(2), 'r.', 'MarkerSize', 20);
    mass1 = plot(rM1(1), rM1(2), 'k.', 'MarkerSize', 20);
    mass2 = plot(rM2(1), rM2(2), 'k.', 'MarkerSize', 20);
    
    window_size_x = 5;
    window_size_y = 2.5;
    axis equal
    xlim([-window_size_x, window_size_x])
    ylim([-window_size_y, window_size_y])
    grid on
    
    title("Double Pendulum Sled Simulation")
    xlabel("x / m")
    ylabel("y / m")
    
    % Playback factor because matlab is slow af
    playfac = 2;

    % Animate pendulum
    for frame = 1:frames
        pause(dt / playfac);
    
        rm = [x(frame, 1); 0];
        rM1 = rm + L1 * [sin(x(frame, 2)); -cos(x(frame, 2))];
        rM2 = rM1 + L2 * [sin(x(frame, 3)); -cos(x(frame, 3))];
    
        arm1.XData = [rm(1), rM1(1)];
        arm1.YData = [rm(2), rM1(2)];
        arm2.XData = [rM1(1), rM2(1)];
        arm2.YData = [rM1(2), rM2(2)];
        sled.XData = rm(1);
        sled.YData = rm(2);
        mass1.XData = rM1(1);
        mass1.YData = rM1(2);
        mass2.XData = rM2(1);
        mass2.YData = rM2(2);
    
        axis equal
        xlim([-window_size_x, window_size_x])
        ylim([-window_size_y, window_size_y])
    
        drawnow
    end
end